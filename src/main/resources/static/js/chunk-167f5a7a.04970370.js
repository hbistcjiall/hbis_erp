(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-167f5a7a"],{"07e3":function(e,t){var a={}.hasOwnProperty;e.exports=function(e,t){return a.call(e,t)}},"1bc3":function(e,t,a){var r=a("f772");e.exports=function(e,t){if(!r(e))return e;var a,n;if(t&&"function"==typeof(a=e.toString)&&!r(n=a.call(e)))return n;if("function"==typeof(a=e.valueOf)&&!r(n=a.call(e)))return n;if(!t&&"function"==typeof(a=e.toString)&&!r(n=a.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},"1ec9":function(e,t,a){var r=a("f772"),n=a("e53d").document,o=r(n)&&r(n.createElement);e.exports=function(e){return o?n.createElement(e):{}}},"25eb":function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},"294c":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"35e8":function(e,t,a){var r=a("d9f6"),n=a("aebd");e.exports=a("8e60")?function(e,t,a){return r.f(e,t,n(1,a))}:function(e,t,a){return e[t]=a,e}},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"5d6b":function(e,t,a){var r=a("e53d").parseInt,n=a("a1ce").trim,o=a("e692"),i=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var a=n(String(e),3);return r(a,t>>>0||(i.test(a)?16:10))}:r},"63b6":function(e,t,a){var r=a("e53d"),n=a("584a"),o=a("d864"),i=a("35e8"),s=a("07e3"),l="prototype",c=function(e,t,a){var d,u,f,p=e&c.F,h=e&c.G,m=e&c.S,g=e&c.P,b=e&c.B,y=e&c.W,v=h?n:n[t]||(n[t]={}),x=v[l],w=h?r:m?r[t]:(r[t]||{})[l];for(d in h&&(a=t),a)(u=!p&&w&&void 0!==w[d])&&s(v,d)||(f=u?w[d]:a[d],v[d]=h&&"function"!=typeof w[d]?a[d]:b&&u?o(f,r):y&&w[d]==f?function(e){var t=function(t,a,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,a)}return new e(t,a,r)}return e.apply(this,arguments)};return t[l]=e[l],t}(f):g&&"function"==typeof f?o(Function.call,f):f,g&&((v.virtual||(v.virtual={}))[d]=f,e&c.R&&x&&!x[d]&&i(x,d,f)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},"6b54":function(e,t,a){"use strict";a("3846");var r=a("cb7c"),n=a("0bfb"),o=a("9e1e"),i="toString",s=/./[i],l=function(e){a("2aba")(RegExp.prototype,i,e,!0)};a("79e5")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?l(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?n.call(e):void 0)}):s.name!=i&&l(function(){return s.call(this)})},"6f48":function(e,t,a){"use strict";var r=a("d791");a.n(r).a},7445:function(e,t,a){var r=a("63b6"),n=a("5d6b");r(r.G+r.F*(parseInt!=n),{parseInt:n})},"794b":function(e,t,a){e.exports=!a("8e60")&&!a("294c")(function(){return 7!=Object.defineProperty(a("1ec9")("div"),"a",{get:function(){return 7}}).a})},"79aa":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"8e60":function(e,t,a){e.exports=!a("294c")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a1ce:function(e,t,a){var r=a("63b6"),n=a("25eb"),o=a("294c"),i=a("e692"),s="["+i+"]",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),d=function(e,t,a){var n={},s=o(function(){return!!i[e]()||"​"!="​"[e]()}),l=n[e]=s?t(u):i[e];a&&(n[a]=l),r(r.P+r.F*s,"String",n)},u=d.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=d},aebd:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},af1c:function(e,t,a){"use strict";var r=a("f413");a.n(r).a},b9e9:function(e,t,a){a("7445"),e.exports=a("584a").parseInt},d118:function(e,t,a){"use strict";a.r(t);var r=a("e814"),n=a.n(r),o={name:"resetPass",data:function(){return{}},methods:{}},i=a("2877"),s=Object(i.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("Row",[t("div",{staticClass:"wrapper"},[t("p",[this._v("是否重置密码为111111")])])])},[],!1,null,null,null).exports,l=(a("6b54"),a("7f7f"),{name:"addUser",props:{url:String},data:function(){return{deptdata:[],formValidate:{account:"",name:"",email:"",sex:"",birthday:"",password:"",phone:"",deptId:"",setpassword:""},ruleValidate:{name:[{required:!0,message:"姓名不为空",trigger:"blur"}],account:[{required:!0,message:"账号不为空",trigger:"blur"}],password:[{required:!0,message:"密码不为空",trigger:"blur"}],deptId:[{required:!0,message:"部门不为空",trigger:"blur"}]}}},mounted:function(){this.getDeptList()},watch:{url:function(e){this.url=e}},methods:{getDeptList:function(){var e=this;fetch(this.url+"/dept/tree",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:"include"}).then(function(t){if(200==t.status)return t.text();e.$Message.error("请求失败！")}).then(function(t){t=t&&0<t.length?JSON.parse(t):[],e.deptdata=e.utils.roleTree(e.utils.buildRoleTree(t))})},accountChange:function(){this.$emit("account",this.formValidate.account)},nameChange:function(){this.$emit("name",this.formValidate.name)},birthdayChange:function(){this.$emit("birthday",this.utils.format(this.formValidate.birthday))},passwordChange:function(){this.$emit("password",this.formValidate.password)},setpasswordChange:function(){this.$emit("setpassword",this.formValidate.setpassword)},emailChange:function(){this.$emit("email",this.formValidate.email)},sexChange:function(e){this.$emit("sex",e)},phoneChange:function(){this.$emit("phone",this.formValidate.phone)},depChange:function(e){if(this.$refs.tree.getCheckedNodes())for(var t=0;t<this.$refs.tree.getCheckedNodes().length;t++)e[0].nodeKey!=this.$refs.tree.getCheckedNodes()[t].nodeKey&&(this.$refs.tree.getCheckedNodes()[t].checked=!1);e[0]?this.formValidate.deptId=e[0].id.toString():this.formValidate.deptId="",this.$emit("deptId",this.formValidate.deptId)}}}),c=(a("6f48"),Object(i.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"账号",prop:"account"}},[a("Input",{attrs:{placeholder:"请输入账号"},on:{"on-change":e.accountChange},model:{value:e.formValidate.account,callback:function(t){e.$set(e.formValidate,"account",t)},expression:"formValidate.account"}})],1),a("FormItem",{attrs:{label:"姓名",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入姓名"},on:{"on-change":e.nameChange},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),a("FormItem",{attrs:{label:"出生日期"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"birthday"}},[a("DatePicker",{attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"出生日期"},on:{"on-change":e.birthdayChange},model:{value:e.formValidate.birthday,callback:function(t){e.$set(e.formValidate,"birthday",t)},expression:"formValidate.birthday"}})],1)],1)],1)],1),a("FormItem",{attrs:{label:"密码",prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"请输入密码"},on:{"on-change":e.passwordChange},model:{value:e.formValidate.password,callback:function(t){e.$set(e.formValidate,"password",t)},expression:"formValidate.password"}})],1),a("FormItem",{attrs:{label:"重复密码",prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"确认密码"},on:{"on-change":e.setpasswordChange},model:{value:e.formValidate.setpassword,callback:function(t){e.$set(e.formValidate,"setpassword",t)},expression:"formValidate.setpassword"}})],1),a("FormItem",{attrs:{label:"E-mail",prop:"email"}},[a("Input",{attrs:{placeholder:"请输入邮箱"},on:{"on-change":e.emailChange},model:{value:e.formValidate.email,callback:function(t){e.$set(e.formValidate,"email",t)},expression:"formValidate.email"}})],1),a("FormItem",{attrs:{label:"性别",prop:"sex"}},[a("Radio-group",{on:{"on-change":e.sexChange},model:{value:e.formValidate.sex,callback:function(t){e.$set(e.formValidate,"sex",t)},expression:"formValidate.sex"}},[a("Radio",{attrs:{label:"M"}},[e._v("男")]),a("Radio",{attrs:{label:"F"}},[e._v("女")])],1)],1),a("FormItem",{attrs:{label:"电话",prop:"phone"}},[a("Input",{attrs:{placeholder:"请输入电话"},on:{"on-change":e.phoneChange},model:{value:e.formValidate.phone,callback:function(t){e.$set(e.formValidate,"phone",t)},expression:"formValidate.phone"}})],1),a("FormItem",{attrs:{label:"部门",prop:"deptId"}},[a("Tree",{ref:"tree",attrs:{data:e.deptdata,"show-checkbox":"","check-strictly":"",multiple:""},on:{"on-check-change":e.depChange}})],1)],1)},[],!1,null,null,null).exports),d={name:"userManager",data:function(){var e=this;return{updModal:!1,setModal:!1,MsgData:{timeLimit:"",page:"0",limit:"10",name:""},delData:{userId:""},freezeData:{userId:"",status:""},resPass:{userId:""},timePick:"",deptdata:[],dataCount:0,pageSize:10,xia:0,columns12:[{title:"账号",align:"center",key:"ACCOUNT"},{title:"姓名",align:"center",key:"NAME"},{title:"性别",align:"center",key:"SEXNAME"},{title:"角色",align:"center",key:"ROLENAME"},{title:"部门",align:"center",key:"DEPTNAME"},{title:"邮箱",align:"center",key:"EMAIL"},{title:"电话",align:"center",key:"PHONE"},{title:"创建时间",align:"center",key:"CREATETIME"},{title:"状态",key:"STATUS",align:"center",render:function(t,a){return t("i-switch",{props:{size:"large",value:a.row.STATUS,"true-value":"ENABLE","false-value":"FREEZE"},on:{"on-change":function(t){e.freezeData.userId=a.row.USERID,e.freezeData.status=t,fetch(e.$store.state.fetchPath+"/mgr/freeze",{method:"POST",headers:e.$store.state.fetchHeader,body:e.utils.formatParams(e.freezeData),credentials:"include"}).then(function(e){return e.text()}).then(function(){e.handleListApproveHistory()})}}},[t("span",{slot:"open",domProps:{innerHTML:"正常"}}),t("span",{slot:"close",domProps:{innerHTML:"冻结"}})])}},{title:"操作",slot:"action",align:"center",width:"260px"}],fecthdata6:[],resDatas:[],formValidate:{account:"",name:"",email:"",sex:"",birthday:"",password:"",phone:"",deptId:"",setpassword:"",userId:""},updformValidate:{name:"",email:"",sex:"",birthday:"",phone:"",deptId:"",userId:""},updruleValidate:{name:[{required:!0,message:"姓名不为空",trigger:"blur"}],deptId:[{required:!0,message:"部门不为空",trigger:"blur"}]},userData:[],roleForm:{userId:""}}},created:function(){var e=this;this.handleListApproveHistory(),fetch(this.$store.state.fetchPath+"/dept/tree",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:"include"}).then(function(t){if(200==t.status)return t.text();e.$Message.error("请求失败！")}).then(function(t){t=t&&0<t.length?JSON.parse(t):[],e.deptdata=e.utils.roleTree(e.utils.buildRoleTree(t))}),fetch(this.$store.state.fetchPath+"/role/roleTreeList",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"",credentials:"include"}).then(function(t){if(200==t.status)return t.text();e.$Message.error("请求失败！")}).then(function(t){t=t&&0<t.length?JSON.parse(t):[],e.userData=e.utils.roleTree(e.utils.buildRoleTree(t))})},methods:{handleListApproveHistory:function(){var e=this;fetch(this.$store.state.fetchPath+"/mgr/list",{method:"POST",headers:this.$store.state.fetchHeader,body:this.utils.formatParams(this.MsgData),credentials:"include"}).then(function(t){if(200==t.status)return t.text();e.$Message.error("请求失败！")}).then(function(t){t=t&&0<t.length?JSON.parse(t):[],e.resDatas=t.data,e.dataCount=n()(t.count),e.pageSize=n()(t.pageSize),e.dataCount<e.pageSize?e.fecthdata6=e.resDatas:e.fecthdata6=e.resDatas.slice(0,e.pageSize)})},changepage:function(e){this.MsgData.page=e,this.handleListApproveHistory()},serTime:function(e){this.Dates=e,""==this.Dates[0]?this.MsgData.timeLimit="":this.MsgData.timeLimit=this.Dates[0]+" - "+this.Dates[1]},search:function(){this.handleListApproveHistory()},addNew:function(){var e=this;this.$Modal.confirm({scrollable:!0,okText:"保存",render:function(t){return t(c,{props:{url:e.$store.state.fetchPath},on:{account:function(t){e.formValidate.account=t},name:function(t){e.formValidate.name=t},birthday:function(t){e.formValidate.birthday=t},password:function(t){e.formValidate.password=t},setpassword:function(t){e.formValidate.setpassword=t},email:function(t){e.formValidate.email=t},sex:function(t){e.formValidate.sex=t},phone:function(t){e.formValidate.phone=t},deptId:function(t){e.formValidate.deptId=t}}})},onOk:function(){fetch(e.$store.state.fetchPath+"/mgr/add",{method:"POST",headers:e.$store.state.fetchHeader,body:e.utils.formatParams(e.formValidate),credentials:"include"}).then(function(t){if(200==t.status)return t.text();e.$Message.error("请求失败！")}).then(function(){e.handleListApproveHistory()})}})},remove:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"确认删除吗？",onOk:function(){t.delData.userId=e.USERID,fetch(t.$store.state.fetchPath+"/mgr/delete",{method:"POST",headers:t.$store.state.fetchHeader,body:t.utils.formatParams(t.delData),credentials:"include"}).then(function(e){if(200==e.status)return e.text();t.$Message.error("请求失败！")}).then(function(){t.handleListApproveHistory()})}})},updD:function(e){this.updModal=!0,this.updformValidate.name=e.NAME,this.updformValidate.email=e.EMAIL,this.updformValidate.birthday=this.utils.format(e.BIRTHDAY),this.updformValidate.sex=e.SEX,this.updformValidate.phone=e.PHONE,this.updformValidate.userId=e.USERID},depChange:function(e){for(var t=[],a=e,r=0;r<a.length;r++)t.push(a[r].id);this.updformValidate.deptId=t.toString()},updok:function(){var e=this;this.updformValidate.birthday=this.utils.format(this.updformValidate.birthday),fetch(this.$store.state.fetchPath+"/mgr/edit",{method:"POST",headers:this.$store.state.fetchHeader,body:this.utils.formatParams(this.updformValidate),credentials:"include"}).then(function(t){if(200==t.status)return t.text();e.$Message.error("请求失败！")}).then(function(){e.handleListApproveHistory()})},setUser:function(e){this.setModal=!0,this.roleForm.userId=e.USERID},roleok:function(){for(var e=this,t=[],a=this.$refs.tree.getCheckedNodes(),r=0;r<a.length;r++)t.push(a[r].id);fetch(this.$store.state.fetchPath+"/mgr/setRole",{method:"POST",headers:this.$store.state.fetchHeader,body:"roleIds="+t.toString()+"&userId="+this.roleForm.userId,credentials:"include"}).then(function(t){if(200==t.status)return t.text();e.$Message.error("请求失败！")}).then(function(t){t=t&&0<t.length?JSON.parse(t):[],e.$Message.success(t.message),e.handleListApproveHistory()})},rePassword:function(e){var t=this;this.resPass.userId=e.USERID,this.$Modal.confirm({scrollable:!0,okText:"确认",render:function(e){return e(s,{props:{},on:{}})},onOk:function(){fetch(t.$store.state.fetchPath+"/mgr/reset",{method:"POST",headers:t.$store.state.fetchHeader,body:t.utils.formatParams(t.resPass),credentials:"include"}).then(function(e){if(200==e.status)return e.text();t.$Message.error("请求失败！")}).then(function(e){e=e&&0<e.length?JSON.parse(e):[],t.$Message.success(e.message),t.handleListApproveHistory()})}})}}},u=(a("af1c"),Object(i.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"账号/姓名/手机号"},model:{value:e.MsgData.name,callback:function(t){e.$set(e.MsgData,"name",t)},expression:"MsgData.name"}}),a("DatePicker",{staticStyle:{width:"300px","margin-right":"20px"},attrs:{type:"datetimerange",format:"yyyy-MM-dd",placeholder:"请选择查询时间"},on:{"on-change":e.serTime}}),a("Button",{staticStyle:{"magin-left":"20px"},attrs:{icon:"ios-search"},on:{click:e.search}},[e._v("搜索")]),a("Button",{staticStyle:{"magin-left":"20px"},attrs:{icon:"ios-add"},on:{click:e.addNew}},[e._v("添加")]),a("Table",{staticStyle:{"margin-top":"20px"},attrs:{border:"",stripe:"",columns:e.columns12,data:e.fecthdata6},scopedSlots:e._u([{key:"name",fn:function(t){var r=t.row;return[a("strong",[e._v(e._s(r.name))])]}},{key:"action",fn:function(t){var r=t.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small"},on:{click:function(t){return e.updD(r)}}},[e._v("编辑")]),a("Button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small"},on:{click:function(t){return e.setUser(r)}}},[e._v("分配角色")]),a("Button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small"},on:{click:function(t){return e.rePassword(r)}}},[e._v("重置密码")]),a("Button",{staticStyle:{background:"#ff6969",color:"#fff"},attrs:{size:"small"},on:{click:function(t){return e.remove(r)}}},[e._v("删除")])]}}])}),a("Page",{staticClass:"paging",staticStyle:{"margin-top":"20px"},attrs:{total:e.dataCount,"page-size":e.pageSize,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changepage}}),a("Modal",{attrs:{title:"用户编辑",closable:!1},on:{"on-ok":e.updok},model:{value:e.updModal,callback:function(t){e.updModal=t},expression:"updModal"}},[a("Form",{attrs:{model:e.updformValidate,rules:e.updruleValidate,"label-width":60}},[a("FormItem",{attrs:{label:"姓名",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入姓名"},model:{value:e.updformValidate.name,callback:function(t){e.$set(e.updformValidate,"name",t)},expression:"updformValidate.name"}})],1),a("FormItem",{attrs:{label:"出生日期"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",[a("DatePicker",{attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"出生日期"},model:{value:e.updformValidate.birthday,callback:function(t){e.$set(e.updformValidate,"birthday",t)},expression:"updformValidate.birthday"}})],1)],1)],1)],1),a("FormItem",{attrs:{label:"E-mail"}},[a("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.updformValidate.email,callback:function(t){e.$set(e.updformValidate,"email",t)},expression:"updformValidate.email"}})],1),a("FormItem",{attrs:{label:"性别"}},[a("Radio-group",{model:{value:e.updformValidate.sex,callback:function(t){e.$set(e.updformValidate,"sex",t)},expression:"updformValidate.sex"}},[a("Radio",{attrs:{label:"M"}},[e._v("男")]),a("Radio",{attrs:{label:"F"}},[e._v("女")])],1)],1),a("FormItem",{attrs:{label:"电话"}},[a("Input",{attrs:{placeholder:"请输入电话"},model:{value:e.updformValidate.phone,callback:function(t){e.$set(e.updformValidate,"phone",t)},expression:"updformValidate.phone"}})],1),a("FormItem",{attrs:{label:"部门",prop:"deptId"}},[a("Tree",{ref:"tree",attrs:{data:e.deptdata},on:{"on-select-change":e.depChange}})],1)],1)],1),a("Modal",{attrs:{title:"分配角色",closable:!1},on:{"on-ok":e.roleok},model:{value:e.setModal,callback:function(t){e.setModal=t},expression:"setModal"}},[a("Tree",{ref:"tree",attrs:{data:e.userData,"show-checkbox":"","check-strictly":""}})],1)],1)},[],!1,null,"0ef788ce",null));t.default=u.exports},d791:function(e,t,a){},d864:function(e,t,a){var r=a("79aa");e.exports=function(e,t,a){if(r(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,r){return e.call(t,a,r)};case 3:return function(a,r,n){return e.call(t,a,r,n)}}return function(){return e.apply(t,arguments)}}},d9f6:function(e,t,a){var r=a("e4ae"),n=a("794b"),o=a("1bc3"),i=Object.defineProperty;t.f=a("8e60")?Object.defineProperty:function(e,t,a){if(r(e),t=o(t,!0),r(a),n)try{return i(e,t,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},e4ae:function(e,t,a){var r=a("f772");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},e53d:function(e,t){var a=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},e692:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(e,t,a){e.exports=a("b9e9")},f413:function(e,t,a){},f772:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}}}]);