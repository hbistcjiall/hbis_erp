(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-019e5ef5"],{"5baa":function(t,e,a){"use strict";var i=a("82c5");a.n(i).a},"82c5":function(t,e,a){},cb2f:function(t,e,a){"use strict";a.r(e);var i={name:"pzgjs_cx",data:function(){return{dw:"",switchTime:!0,year:new Date,startTime:new Date,endTime:this.utils.formatMonthEnd(),cx:"",columns:[{title:"单位",key:"COMPANYNAME",align:"center",fixed:"left",isMergeRow:!0},{title:"产线",key:"NAME",align:"center"},{title:"内贸总量",key:"nmzl",align:"center",children:[{title:"内贸总量-总量",key:"FKIMG",align:"center"},{title:"内贸总量-品种钢",key:"PZGL",align:"center"},{title:"内贸总量-比重",key:"BZ",align:"center"}]},{title:"环比",key:"hb",align:"center"},{title:"专业公司",key:"zygs",align:"center",children:[{title:"专业公司-总量",key:"ZYFKIMG",align:"center"},{title:"专业公司-品种钢",key:"ZYPZGL",align:"center"},{title:"专业公司-比重",key:"ZYBZ",align:"center"}]},{title:"分公司",key:"fgs",align:"center",children:[{title:"分公司-总量",key:"FGSFKIMG",align:"center"},{title:"分公司-品种钢",key:"FGSPZGL",align:"center"},{title:"分公司-比重",key:"FGSBZ",align:"center"}]},{title:"子公司",key:"zgs",align:"center",children:[{title:"子公司-总量",key:"ZGSFKIMG",align:"center"},{title:"子公司-品种钢",key:"ZGSPZGL",align:"center"},{title:"子公司-比重",key:"ZGSBZ",align:"center"}]}],data:[],cxData:[],cxCx:{pz:""}}},mounted:function(){this.getList(),this.getCxData()},methods:{getCxData:function(){var t=this;fetch(this.$store.state.fetchPath+"/scm-steel-settle/getzyjhcxtjcx",{method:"POST",headers:this.$store.state.fetchHeader,body:this.utils.formatParams(this.cxCx),credentials:"include"}).then(function(e){if(200==e.status)return e.text();t.$Message.error("请求失败！")}).then(function(e){e=e&&0<e.length?JSON.parse(e):[],t.cxData=t.utils.getCx(e)})},changeSwitch:function(){var t=new Date;this.switchTime?(this.startTime=t,this.endTime=this.utils.formatMonthEnd()):this.year=t},getList:function(){var t=this,e={};this.dw&&(e.dw=this.dw),this.cx&&(e.cx=this.cx);var a="startTime=",i="&endTime=";this.switchTime?(a+=this.utils.formatMonthStart(this.startTime),i+=this.utils.formatMonthStart(this.endTime)):(a+=this.utils.formatYearStart(this.year),i+=this.utils.formatYearEnd(this.year)),fetch(this.$store.state.fetchPath+"/scm-steel-settle/getcx",{method:"POST",headers:this.$store.state.fetchHeader,body:a+i+"&"+this.utils.formatParams(e),credentials:"include"}).then(function(e){if(200==e.status)return e.text();t.$Message.error("请求失败！")}).then(function(e){e=e&&0<e.length?JSON.parse(e):[],t.data=t.utils.mergeRow(e,"COMPANYNAME")})},downLoad:function(){this.$refs.table.exportCsv({filename:"结算完成（产线）明细"})}}},s=(a("5baa"),a("2877")),n=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{attrs:{"label-width":50}},[a("Row",[t.switchTime?t._e():a("Col",{attrs:{span:"6"}},[a("FormItem",{staticStyle:{width:"250px"},attrs:{label:"年份："}},[a("DatePicker",{staticStyle:{width:"150px"},attrs:{type:"year",placeholder:"请选择年份",editable:!1,clearable:!1},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1)],1),t.switchTime?a("Col",{attrs:{span:"4"}},[a("FormItem",{staticStyle:{width:"150px"},attrs:{label:"月份："}},[a("DatePicker",{staticStyle:{width:"150px"},attrs:{type:"month",placeholder:"起始月份",editable:!1,clearable:!1},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1)],1):t._e(),t.switchTime?a("Col",{staticStyle:{"margin-left":"-40px"},attrs:{span:"4"}},[a("FormItem",{staticStyle:{width:"150px"}},[a("DatePicker",{staticStyle:{width:"150px"},attrs:{type:"month",placeholder:"终止月份",editable:!1,clearable:!1},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)],1):t._e(),a("Col",{attrs:{span:"3"}},[a("FormItem",{staticStyle:{width:"50px"}},[a("i-switch",{on:{"on-change":t.changeSwitch},model:{value:t.switchTime,callback:function(e){t.switchTime=e},expression:"switchTime"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("年")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("月")])])],1)],1),a("Col",{attrs:{span:"4"}},[a("FormItem",{staticStyle:{width:"120px"},attrs:{label:"单位："}},[a("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择单位"},model:{value:t.dw,callback:function(e){t.dw=e},expression:"dw"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),a("Option",{attrs:{value:"9580"}},[t._v("唐钢")]),a("Option",{attrs:{value:"9727"}},[t._v("邯钢")]),a("Option",{attrs:{value:"9193"}},[t._v("宣钢")]),a("Option",{attrs:{value:"9196"}},[t._v("承钢")]),a("Option",{attrs:{value:"1932"}},[t._v("舞钢")]),a("Option",{attrs:{value:"8110"}},[t._v("石钢")]),a("Option",{attrs:{value:"8493"}},[t._v("衡板")]),a("Option",{attrs:{value:"7778"}},[t._v("邯宝")])],1)],1)],1),a("Col",{attrs:{span:"4"}},[a("FormItem",{staticStyle:{width:"120px"},attrs:{label:"产线："}},[a("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择产线"},model:{value:t.cx,callback:function(e){t.cx=e},expression:"cx"}},t._l(t.cxData,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1)],1),a("Col",{attrs:{span:"4"}},[a("Button",{attrs:{icon:"ios-search"},on:{click:function(e){return t.getList()}}},[t._v("查询")]),a("Button",{attrs:{icon:"ios-cloud-download-outline"},on:{click:function(e){return t.downLoad()}}},[t._v("导出")])],1)],1)],1),a("Table",{ref:"table",attrs:{columns:t.columns,data:t.data,border:"",height:"500"}})],1)},[],!1,null,"538fa296",null);e.default=n.exports}}]);