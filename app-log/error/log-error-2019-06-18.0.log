2019-06-18 03:17:01.095 ERROR 7216 --- [Druid-ConnectionPool-Destroy-1848211650] com.alibaba.druid.util.JdbcUtils         : close connection error

java.sql.SQLRecoverableException: IO 错误: Connection reset by peer: socket write error
	at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:504)
	at oracle.jdbc.driver.PhysicalConnection.close(PhysicalConnection.java:3754)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:186)
	at com.alibaba.druid.filter.stat.StatFilter.connection_close(StatFilter.java:261)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:181)
	at com.alibaba.druid.filter.FilterAdapter.connection_close(FilterAdapter.java:776)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:181)
	at com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.close(ConnectionProxyImpl.java:115)
	at com.alibaba.druid.util.JdbcUtils.close(JdbcUtils.java:73)
	at com.alibaba.druid.pool.DruidDataSource.shrink(DruidDataSource.java:2833)
	at com.alibaba.druid.pool.DruidDataSource$DestroyTask.run(DruidDataSource.java:2598)
	at com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:2585)
Caused by: java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
	at oracle.net.ns.DataPacket.send(DataPacket.java:199)
	at oracle.net.ns.NetOutputStream.flush(NetOutputStream.java:211)
	at oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:227)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:175)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:100)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:85)
	at oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4CSocketInputStreamWrapper.java:122)
	at oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInputStreamWrapper.java:78)
	at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1179)
	at oracle.jdbc.driver.T4CMAREngine.unmarshalSB1(T4CMAREngine.java:1155)
	at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:279)
	at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
	at oracle.jdbc.driver.T4C7Ocommoncall.doOLOGOFF(T4C7Ocommoncall.java:61)
	at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:491)
	... 11 common frames omitted

2019-06-18 08:27:42.853 ERROR 9536 --- [Druid-ConnectionPool-Destroy-1151433940] com.alibaba.druid.util.JdbcUtils         : close connection error

java.sql.SQLRecoverableException: IO 错误: Connection reset by peer: socket write error
	at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:504)
	at oracle.jdbc.driver.PhysicalConnection.close(PhysicalConnection.java:3754)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:186)
	at com.alibaba.druid.filter.stat.StatFilter.connection_close(StatFilter.java:261)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:181)
	at com.alibaba.druid.filter.FilterAdapter.connection_close(FilterAdapter.java:776)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:181)
	at com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.close(ConnectionProxyImpl.java:115)
	at com.alibaba.druid.util.JdbcUtils.close(JdbcUtils.java:73)
	at com.alibaba.druid.pool.DruidDataSource.shrink(DruidDataSource.java:2833)
	at com.alibaba.druid.pool.DruidDataSource$DestroyTask.run(DruidDataSource.java:2598)
	at com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:2585)
Caused by: java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
	at oracle.net.ns.DataPacket.send(DataPacket.java:199)
	at oracle.net.ns.NetOutputStream.flush(NetOutputStream.java:211)
	at oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:227)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:175)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:100)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:85)
	at oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4CSocketInputStreamWrapper.java:122)
	at oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInputStreamWrapper.java:78)
	at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1179)
	at oracle.jdbc.driver.T4CMAREngine.unmarshalSB1(T4CMAREngine.java:1155)
	at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:279)
	at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
	at oracle.jdbc.driver.T4C7Ocommoncall.doOLOGOFF(T4C7Ocommoncall.java:61)
	at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:491)
	... 11 common frames omitted

2019-06-18 08:27:42.869 ERROR 9536 --- [Druid-ConnectionPool-Destroy-1151433940] com.alibaba.druid.util.JdbcUtils         : close connection error

java.sql.SQLRecoverableException: IO 错误: Connection reset by peer: socket write error
	at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:504)
	at oracle.jdbc.driver.PhysicalConnection.close(PhysicalConnection.java:3754)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:186)
	at com.alibaba.druid.filter.stat.StatFilter.connection_close(StatFilter.java:261)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:181)
	at com.alibaba.druid.filter.FilterAdapter.connection_close(FilterAdapter.java:776)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:181)
	at com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.close(ConnectionProxyImpl.java:115)
	at com.alibaba.druid.util.JdbcUtils.close(JdbcUtils.java:73)
	at com.alibaba.druid.pool.DruidDataSource.shrink(DruidDataSource.java:2833)
	at com.alibaba.druid.pool.DruidDataSource$DestroyTask.run(DruidDataSource.java:2598)
	at com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:2585)
Caused by: java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
	at oracle.net.ns.DataPacket.send(DataPacket.java:199)
	at oracle.net.ns.NetOutputStream.flush(NetOutputStream.java:211)
	at oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:227)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:175)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:100)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:85)
	at oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4CSocketInputStreamWrapper.java:122)
	at oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInputStreamWrapper.java:78)
	at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1179)
	at oracle.jdbc.driver.T4CMAREngine.unmarshalSB1(T4CMAREngine.java:1155)
	at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:279)
	at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
	at oracle.jdbc.driver.T4C7Ocommoncall.doOLOGOFF(T4C7Ocommoncall.java:61)
	at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:491)
	... 11 common frames omitted

2019-06-18 08:27:42.869 ERROR 9536 --- [Druid-ConnectionPool-Destroy-1151433940] com.alibaba.druid.util.JdbcUtils         : close connection error

java.sql.SQLRecoverableException: IO 错误: Connection reset by peer: socket write error
	at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:504)
	at oracle.jdbc.driver.PhysicalConnection.close(PhysicalConnection.java:3754)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:186)
	at com.alibaba.druid.filter.stat.StatFilter.connection_close(StatFilter.java:261)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:181)
	at com.alibaba.druid.filter.FilterAdapter.connection_close(FilterAdapter.java:776)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:181)
	at com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.close(ConnectionProxyImpl.java:115)
	at com.alibaba.druid.util.JdbcUtils.close(JdbcUtils.java:73)
	at com.alibaba.druid.pool.DruidDataSource.shrink(DruidDataSource.java:2833)
	at com.alibaba.druid.pool.DruidDataSource$DestroyTask.run(DruidDataSource.java:2598)
	at com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:2585)
Caused by: java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
	at oracle.net.ns.DataPacket.send(DataPacket.java:199)
	at oracle.net.ns.NetOutputStream.flush(NetOutputStream.java:211)
	at oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:227)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:175)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:100)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:85)
	at oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4CSocketInputStreamWrapper.java:122)
	at oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInputStreamWrapper.java:78)
	at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1179)
	at oracle.jdbc.driver.T4CMAREngine.unmarshalSB1(T4CMAREngine.java:1155)
	at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:279)
	at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
	at oracle.jdbc.driver.T4C7Ocommoncall.doOLOGOFF(T4C7Ocommoncall.java:61)
	at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:491)
	... 11 common frames omitted

2019-06-18 08:27:42.884 ERROR 9536 --- [Druid-ConnectionPool-Destroy-1151433940] com.alibaba.druid.util.JdbcUtils         : close connection error

java.sql.SQLRecoverableException: IO 错误: Connection reset by peer: socket write error
	at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:504)
	at oracle.jdbc.driver.PhysicalConnection.close(PhysicalConnection.java:3754)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:186)
	at com.alibaba.druid.filter.stat.StatFilter.connection_close(StatFilter.java:261)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:181)
	at com.alibaba.druid.filter.FilterAdapter.connection_close(FilterAdapter.java:776)
	at com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl.java:181)
	at com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.close(ConnectionProxyImpl.java:115)
	at com.alibaba.druid.util.JdbcUtils.close(JdbcUtils.java:73)
	at com.alibaba.druid.pool.DruidDataSource.shrink(DruidDataSource.java:2833)
	at com.alibaba.druid.pool.DruidDataSource$DestroyTask.run(DruidDataSource.java:2598)
	at com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:2585)
Caused by: java.net.SocketException: Connection reset by peer: socket write error
	at java.net.SocketOutputStream.socketWrite0(Native Method)
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
	at oracle.net.ns.DataPacket.send(DataPacket.java:199)
	at oracle.net.ns.NetOutputStream.flush(NetOutputStream.java:211)
	at oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:227)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:175)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:100)
	at oracle.net.ns.NetInputStream.read(NetInputStream.java:85)
	at oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4CSocketInputStreamWrapper.java:122)
	at oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInputStreamWrapper.java:78)
	at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1179)
	at oracle.jdbc.driver.T4CMAREngine.unmarshalSB1(T4CMAREngine.java:1155)
	at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:279)
	at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
	at oracle.jdbc.driver.T4C7Ocommoncall.doOLOGOFF(T4C7Ocommoncall.java:61)
	at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:491)
	... 11 common frames omitted

2019-06-18 09:23:03.616 ERROR 4580 --- [http-nio-8081-exec-1] c.h.erp.core.aop.GlobalExceptionHandler  : 运行时异常:

java.lang.NumberFormatException: multiple points
	at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1890)
	at sun.misc.FloatingDecimal.parseDouble(FloatingDecimal.java:110)
	at java.lang.Double.parseDouble(Double.java:538)
	at java.text.DigitList.getDouble(DigitList.java:169)
	at java.text.DecimalFormat.parse(DecimalFormat.java:2056)
	at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:1869)
	at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1514)
	at java.text.DateFormat.parse(DateFormat.java:364)
	at cn.hbis.erp.core.util.DateUtil.getFirstDayOfMonth(DateUtil.java:31)
	at cn.hbis.erp.modular.system.controller.YxybController.getyxybpz(YxybController.java:44)
	at cn.hbis.erp.modular.system.controller.YxybController$$FastClassBySpringCGLIB$$c43b9fad.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at cn.hbis.erp.core.interceptor.SessionHolderInterceptor.sessionKit(SessionHolderInterceptor.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.controller.YxybController$$EnhancerBySpringCGLIB$$b439a8df.getyxybpz(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
	at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at cn.stylefeng.roses.core.xss.XssFilter.doFilter(XssFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:123)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:791)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)

2019-06-18 09:23:03.616 ERROR 4580 --- [http-nio-8081-exec-2] c.h.erp.core.aop.GlobalExceptionHandler  : 运行时异常:

java.lang.NumberFormatException: multiple points
	at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1890)
	at sun.misc.FloatingDecimal.parseDouble(FloatingDecimal.java:110)
	at java.lang.Double.parseDouble(Double.java:538)
	at java.text.DigitList.getDouble(DigitList.java:169)
	at java.text.DecimalFormat.parse(DecimalFormat.java:2056)
	at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:1869)
	at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1514)
	at java.text.DateFormat.parse(DateFormat.java:364)
	at cn.hbis.erp.core.util.DateUtil.getFirstDayOfMonth(DateUtil.java:31)
	at cn.hbis.erp.modular.system.controller.YxybController.getyxybpz(YxybController.java:44)
	at cn.hbis.erp.modular.system.controller.YxybController$$FastClassBySpringCGLIB$$c43b9fad.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at cn.hbis.erp.core.interceptor.SessionHolderInterceptor.sessionKit(SessionHolderInterceptor.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.controller.YxybController$$EnhancerBySpringCGLIB$$b439a8df.getyxybpz(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
	at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at cn.stylefeng.roses.core.xss.XssFilter.doFilter(XssFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:123)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:791)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)

2019-06-18 10:38:40.358 ERROR 4652 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : init datasource error, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 10:38:40.421 ERROR 4652 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} init error

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 10:38:40.577 ERROR 4652 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'constantFactory' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\core\common\constant\factory\ConstantFactory.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1270)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:184)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	... 22 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	... 24 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	... 43 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	... 56 common frames omitted
Caused by: java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	... 67 common frames omitted
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 11:00:18.550 ERROR 1644 --- [Druid-ConnectionPool-Create-744983868] com.alibaba.druid.pool.DruidDataSource   : create connection SQLException, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1, errorCode 20, state 61000

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2505)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 12 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 17 common frames omitted

2019-06-18 11:00:35.640 ERROR 1644 --- [Druid-ConnectionPool-Create-744983868] com.alibaba.druid.pool.DruidDataSource   : create connection SQLException, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1, errorCode 20, state 61000

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2505)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 12 common frames omitted
Caused by: java.net.SocketException: Software caused connection abort: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 17 common frames omitted

2019-06-18 11:00:45.706 ERROR 1644 --- [http-nio-8081-exec-7] c.h.erp.core.aop.GlobalExceptionHandler  : 运行时异常:

org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5011, active 0, maxActive 20, creating 1, createElapseMillis 9504
### The error may exist in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\mapping\ScmSteelSettleMapper.xml]
### The error may involve cn.hbis.erp.modular.system.mapper.ScmSteelSettleMapper.getyxybpz
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5011, active 0, maxActive 20, creating 1, createElapseMillis 9504
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:77)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
	at com.sun.proxy.$Proxy105.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.executeForMany(PageMapperMethod.java:173)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.execute(PageMapperMethod.java:86)
	at com.baomidou.mybatisplus.core.override.PageMapperProxy.invoke(PageMapperProxy.java:64)
	at com.sun.proxy.$Proxy127.getyxybpz(Unknown Source)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService.getyxybpz(ScmSteelSettleService.java:165)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$FastClassBySpringCGLIB$$b0370e9a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$EnhancerBySpringCGLIB$$d350e38e.getyxybpz(<generated>)
	at cn.hbis.erp.modular.system.controller.YxybController.getyxybpz(YxybController.java:47)
	at cn.hbis.erp.modular.system.controller.YxybController$$FastClassBySpringCGLIB$$c43b9fad.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at cn.hbis.erp.core.interceptor.SessionHolderInterceptor.sessionKit(SessionHolderInterceptor.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.controller.YxybController$$EnhancerBySpringCGLIB$$e704986d.getyxybpz(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
	at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at cn.stylefeng.roses.core.xss.XssFilter.doFilter(XssFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:123)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:791)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5011, active 0, maxActive 20, creating 1, createElapseMillis 9504
### The error may exist in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\mapping\ScmSteelSettleMapper.xml]
### The error may involve cn.hbis.erp.modular.system.mapper.ScmSteelSettleMapper.getyxybpz
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5011, active 0, maxActive 20, creating 1, createElapseMillis 9504
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:150)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	... 112 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5011, active 0, maxActive 20, creating 1, createElapseMillis 9504
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:82)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:68)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:338)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:84)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:62)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:326)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:148)
	... 118 common frames omitted
Caused by: com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5011, active 0, maxActive 20, creating 1, createElapseMillis 9504
	at com.alibaba.druid.pool.DruidDataSource.getConnectionInternal(DruidDataSource.java:1534)
	at com.alibaba.druid.pool.DruidDataSource.getConnectionDirect(DruidDataSource.java:1272)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5007)
	at com.alibaba.druid.filter.stat.StatFilter.dataSource_getConnection(StatFilter.java:680)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5003)
	at com.alibaba.druid.filter.FilterAdapter.dataSource_getConnection(FilterAdapter.java:2745)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5003)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1250)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1242)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:89)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy98.getConnection(Unknown Source)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:151)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:115)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:78)
	... 128 common frames omitted
Caused by: java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2505)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 12 common frames omitted
Caused by: java.net.SocketException: Software caused connection abort: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 17 common frames omitted

2019-06-18 11:00:55.751 ERROR 1644 --- [pool-1-thread-1] cn.hbis.erp.core.log.LogManager          : 创建异常日志异常!

org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5005, active 0, maxActive 20, creating 1, createElapseMillis 19564
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5005, active 0, maxActive 20, creating 1, createElapseMillis 19564
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:77)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
	at com.sun.proxy.$Proxy105.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:278)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.execute(PageMapperMethod.java:68)
	at com.baomidou.mybatisplus.core.override.PageMapperProxy.invoke(PageMapperProxy.java:64)
	at com.sun.proxy.$Proxy128.insert(Unknown Source)
	at cn.hbis.erp.core.log.factory.LogTaskFactory$5.run(LogTaskFactory.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5005, active 0, maxActive 20, creating 1, createElapseMillis 19564
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5005, active 0, maxActive 20, creating 1, createElapseMillis 19564
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:200)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:185)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	... 13 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5005, active 0, maxActive 20, creating 1, createElapseMillis 19564
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:82)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:68)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:338)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:84)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:49)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:198)
	... 19 common frames omitted
Caused by: com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5005, active 0, maxActive 20, creating 1, createElapseMillis 19564
	at com.alibaba.druid.pool.DruidDataSource.getConnectionInternal(DruidDataSource.java:1534)
	at com.alibaba.druid.pool.DruidDataSource.getConnectionDirect(DruidDataSource.java:1272)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5007)
	at com.alibaba.druid.filter.stat.StatFilter.dataSource_getConnection(StatFilter.java:680)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5003)
	at com.alibaba.druid.filter.FilterAdapter.dataSource_getConnection(FilterAdapter.java:2745)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5003)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1250)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1242)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:89)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy98.getConnection(Unknown Source)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:151)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:115)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:78)
	... 27 common frames omitted
Caused by: java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2505)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 12 common frames omitted
Caused by: java.net.SocketException: Software caused connection abort: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 17 common frames omitted

2019-06-18 11:00:57.248 ERROR 1644 --- [Druid-ConnectionPool-Create-744983868] com.alibaba.druid.pool.DruidDataSource   : create connection SQLException, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1, errorCode 20, state 61000

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2505)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 12 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 17 common frames omitted

2019-06-18 11:18:18.143 ERROR 10140 --- [http-nio-8081-exec-6] c.h.erp.core.aop.GlobalExceptionHandler  : 运行时异常:

org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

### The error may exist in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\mapping\ScmSteelSettleMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: select COMPANYNAME, kzwi6, FKIMG, sj from         (select nvl(name,'合计') COMPANYNAME, "SUM"(kzwi6)/10000 kzwi6,sum(FKIMG) FKIMG,decode(sum(FKIMG),0,0,sum(kzwi6)/sum(FKIMG)) sj from         (select NAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from (SELECT         case when  vc.VARIETY_CLASS ='' then '其他' end NAME,         "SUM"(kzwi6) kzwi6,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss')         and sale_body = '专业公司' or sale_body = '专业公司' then fkimg end)         zyfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)         fgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部' or sale_body='子公司' or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)         zgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         (select max(DATA.Name)         from scm_delivery_detail detail         JOIN crm_resource_data DATA         ON DATA.full_name = detail.ext         AND DATA.company_id = detail.company_id         AND (DATA.TYPE = 6 )         where  detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  <> 'X' or         detail.delivery_delete is null)) cxname,         sso.sale_body ss,         (select max(detail.ext)         from scm_delivery_detail detail         where settle.company_id = detail.company_id         and settle.vgbel = detail.deliv_numb         and settle.vgpos = detail.deliv_item         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')          and  settle.company_id in ('9580','9727','9193')          order by settle.id desc) t         LEFT JOIN SCM_VARIETY_CLASS vc         on t.cxname = vc.name         where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                       where cfd.data_type in ('5','10')                                 and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)          group by  vc.VARIETY_CLASS ) a            union all         (select NAME COMPANYNAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from (         SELECT          case when  vc.VARIETY_CLASS ='' then '其他' end NAME,         "SUM"(kzwi6) kzwi6,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '专业公司' then fkimg end)         zyfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)         fgsfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部'  or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)         zgsfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         sso.sale_body ss,         (select max(DATA.Name)         from scm_delivery_detail detail         JOIN crm_resource_data DATA         ON DATA.full_name = detail.ext         AND DATA.company_id = detail.company_id         AND (DATA.TYPE = 6 )         where  detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  <> 'X' or         detail.delivery_delete is null)) cxname,          (select max(detail.ext)         from scm_delivery_detail detail         where  detail.DELIV_NUMB = settle.vgbel         and detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and  settle.company_id in ('9196')          order by settle.id desc) t         LEFT JOIN SCM_VARIETY_CLASS vc         on t.cxname = vc.name         where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                        where cfd.data_type in ('5','10')                                 and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)          group by  vc.VARIETY_CLASS )         )           union all          ( select name,kzwi6,(nvl(zyfkimg,0)+ nvl(fgsfkimg,0) +nvl(zgsfkimg,0)+nvl(ckfkimg,0)) fkimg,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from         (         select         case when  vc.VARIETY_CLASS ='' then '其他' end NAME,         "SUM"(kzwi6) kzwi6,         sum(case when company_id = '1932'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_group = '销售部' then case when fkimg is null then 0 else fkimg end end end)         zyfkimg,          sum( case when company_id='8110' then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sggl = '分公司'  or sggl = '出口'  then fkimg end else null end )         fgsfkimg,          sum(case when company_id = '1932'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '科技部')  then fkimg end         when company_id ='8493'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '营销中心' or sale_group ='1000' )  then fkimg end end)         zgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (company_id = '1932' and sale_group = '舞钢国贸') or sggl ='出口' then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         sso.sale_body sggl,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         case when  settle.company_id ='1932' then '中厚板' when  settle.company_id ='8110' then '圆钢' when settle.company_id ='8493'then '薄板'  end  VARIETY_CLASS,          (select case when  B.company_id ='1932' then '舞钢中厚板' when  B.company_id ='8110' then '石钢圆钢' when B.company_id ='8493'then '衡板薄板' else b.variety end VARIETY         from scm_sale_order sso         JOIN scm_variety_to_pt_gp B         ON sso.product_code = B.product_group         and sso.company_id = B.company_id         where sso.order_no = settle.aubel         and sso.ORDER_ROW = settle.AUPOS         AND sso.company_id = settle.company_id) cxname,         (select max(detail.ext)         from scm_delivery_detail detail          where settle.company_id = detail.company_id         and settle.vgbel = detail.deliv_numb         and settle.vgpos = detail.deliv_item         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and  settle.company_id in ('8110','8493','1932')          order by settle.id desc) t          where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                        where cfd.data_type in ('5','10')                                    and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)          group by t.VARIETY_CLASS  )         )          )                     group by rollup(name) )         order by "DECODE"(companyname,'合计','1','热板','2','冷板','3','宽厚板','4','棒线','5','型带','6','特钢','7','薄板','8')
### Cause: java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:234)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
	at com.sun.proxy.$Proxy105.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.executeForMany(PageMapperMethod.java:173)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.execute(PageMapperMethod.java:86)
	at com.baomidou.mybatisplus.core.override.PageMapperProxy.invoke(PageMapperProxy.java:64)
	at com.sun.proxy.$Proxy127.getyxybpz(Unknown Source)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService.getyxybpz(ScmSteelSettleService.java:165)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$FastClassBySpringCGLIB$$b0370e9a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$EnhancerBySpringCGLIB$$54918911.getyxybpz(<generated>)
	at cn.hbis.erp.modular.system.controller.YxybController.getyxybpz(YxybController.java:47)
	at cn.hbis.erp.modular.system.controller.YxybController$$FastClassBySpringCGLIB$$c43b9fad.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at cn.hbis.erp.core.interceptor.SessionHolderInterceptor.sessionKit(SessionHolderInterceptor.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.controller.YxybController$$EnhancerBySpringCGLIB$$b37532a1.getyxybpz(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
	at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at cn.stylefeng.roses.core.xss.XssFilter.doFilter(XssFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:123)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:791)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

	at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:439)
	at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:395)
	at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:802)
	at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:436)
	at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
	at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:521)
	at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:205)
	at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:861)
	at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1145)
	at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1267)
	at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3449)
	at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3550)
	at oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1374)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3409)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:440)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3407)
	at com.alibaba.druid.wall.WallFilter.preparedStatement_execute(WallFilter.java:620)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3407)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:167)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:498)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy169.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:63)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy167.query(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:326)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:148)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	... 112 common frames omitted

2019-06-18 11:18:26.866 ERROR 10140 --- [http-nio-8081-exec-7] c.h.erp.core.aop.GlobalExceptionHandler  : 运行时异常:

org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

### The error may exist in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\mapping\ScmSteelSettleMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: select COMPANYNAME, kzwi6, FKIMG, sj from         (select nvl(name,'合计') COMPANYNAME, "SUM"(kzwi6)/10000 kzwi6,sum(FKIMG) FKIMG,decode(sum(FKIMG),0,0,sum(kzwi6)/sum(FKIMG)) sj from         (select NAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from (SELECT         case when  vc.VARIETY_CLASS ='' then '其他' end NAME,         "SUM"(kzwi6) kzwi6,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss')         and sale_body = '专业公司' or sale_body = '专业公司' then fkimg end)         zyfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)         fgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部' or sale_body='子公司' or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)         zgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         (select max(DATA.Name)         from scm_delivery_detail detail         JOIN crm_resource_data DATA         ON DATA.full_name = detail.ext         AND DATA.company_id = detail.company_id         AND (DATA.TYPE = 6 )         where  detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  <> 'X' or         detail.delivery_delete is null)) cxname,         sso.sale_body ss,         (select max(detail.ext)         from scm_delivery_detail detail         where settle.company_id = detail.company_id         and settle.vgbel = detail.deliv_numb         and settle.vgpos = detail.deliv_item         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')          and  settle.company_id in ('9580','9727','9193')          order by settle.id desc) t         LEFT JOIN SCM_VARIETY_CLASS vc         on t.cxname = vc.name         where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                       where cfd.data_type in ('5','10')                                 and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)          group by  vc.VARIETY_CLASS ) a            union all         (select NAME COMPANYNAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from (         SELECT          case when  vc.VARIETY_CLASS ='' then '其他' end NAME,         "SUM"(kzwi6) kzwi6,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '专业公司' then fkimg end)         zyfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)         fgsfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部'  or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)         zgsfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         sso.sale_body ss,         (select max(DATA.Name)         from scm_delivery_detail detail         JOIN crm_resource_data DATA         ON DATA.full_name = detail.ext         AND DATA.company_id = detail.company_id         AND (DATA.TYPE = 6 )         where  detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  <> 'X' or         detail.delivery_delete is null)) cxname,          (select max(detail.ext)         from scm_delivery_detail detail         where  detail.DELIV_NUMB = settle.vgbel         and detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and  settle.company_id in ('9196')          order by settle.id desc) t         LEFT JOIN SCM_VARIETY_CLASS vc         on t.cxname = vc.name         where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                        where cfd.data_type in ('5','10')                                 and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)          group by  vc.VARIETY_CLASS )         )           union all          ( select name,kzwi6,(nvl(zyfkimg,0)+ nvl(fgsfkimg,0) +nvl(zgsfkimg,0)+nvl(ckfkimg,0)) fkimg,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from         (         select         case when  vc.VARIETY_CLASS ='' then '其他' end NAME,         "SUM"(kzwi6) kzwi6,         sum(case when company_id = '1932'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_group = '销售部' then case when fkimg is null then 0 else fkimg end end end)         zyfkimg,          sum( case when company_id='8110' then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sggl = '分公司'  or sggl = '出口'  then fkimg end else null end )         fgsfkimg,          sum(case when company_id = '1932'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '科技部')  then fkimg end         when company_id ='8493'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '营销中心' or sale_group ='1000' )  then fkimg end end)         zgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (company_id = '1932' and sale_group = '舞钢国贸') or sggl ='出口' then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         sso.sale_body sggl,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         case when  settle.company_id ='1932' then '中厚板' when  settle.company_id ='8110' then '圆钢' when settle.company_id ='8493'then '薄板'  end  VARIETY_CLASS,          (select case when  B.company_id ='1932' then '舞钢中厚板' when  B.company_id ='8110' then '石钢圆钢' when B.company_id ='8493'then '衡板薄板' else b.variety end VARIETY         from scm_sale_order sso         JOIN scm_variety_to_pt_gp B         ON sso.product_code = B.product_group         and sso.company_id = B.company_id         where sso.order_no = settle.aubel         and sso.ORDER_ROW = settle.AUPOS         AND sso.company_id = settle.company_id) cxname,         (select max(detail.ext)         from scm_delivery_detail detail          where settle.company_id = detail.company_id         and settle.vgbel = detail.deliv_numb         and settle.vgpos = detail.deliv_item         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and  settle.company_id in ('8110','8493','1932')          order by settle.id desc) t          where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                        where cfd.data_type in ('5','10')                                    and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)          group by t.VARIETY_CLASS  )         )          )                     group by rollup(name) )         order by "DECODE"(companyname,'合计','1','热板','2','冷板','3','宽厚板','4','棒线','5','型带','6','特钢','7','薄板','8')
### Cause: java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:234)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
	at com.sun.proxy.$Proxy105.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.executeForMany(PageMapperMethod.java:173)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.execute(PageMapperMethod.java:86)
	at com.baomidou.mybatisplus.core.override.PageMapperProxy.invoke(PageMapperProxy.java:64)
	at com.sun.proxy.$Proxy127.getyxybpz(Unknown Source)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService.getyxybpz(ScmSteelSettleService.java:165)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$FastClassBySpringCGLIB$$b0370e9a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$EnhancerBySpringCGLIB$$54918911.getyxybpz(<generated>)
	at cn.hbis.erp.modular.system.controller.YxybController.getyxybpz(YxybController.java:47)
	at cn.hbis.erp.modular.system.controller.YxybController$$FastClassBySpringCGLIB$$c43b9fad.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at cn.hbis.erp.core.interceptor.SessionHolderInterceptor.sessionKit(SessionHolderInterceptor.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.controller.YxybController$$EnhancerBySpringCGLIB$$b37532a1.getyxybpz(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
	at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at cn.stylefeng.roses.core.xss.XssFilter.doFilter(XssFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:123)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:791)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

	at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:439)
	at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:395)
	at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:802)
	at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:436)
	at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
	at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:521)
	at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:205)
	at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:861)
	at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1145)
	at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1267)
	at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3449)
	at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3550)
	at oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1374)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3409)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:440)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3407)
	at com.alibaba.druid.wall.WallFilter.preparedStatement_execute(WallFilter.java:620)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3407)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:167)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:498)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy169.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:63)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy167.query(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:326)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:148)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	... 112 common frames omitted

2019-06-18 11:26:02.587 ERROR 2404 --- [http-nio-8081-exec-4] c.h.erp.core.aop.GlobalExceptionHandler  : 运行时异常:

org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

### The error may exist in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\mapping\ScmSteelSettleMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: select COMPANYNAME, kzwi6, FKIMG, sj from         (select nvl(name,'合计') COMPANYNAME, "SUM"(kzwi6)/10000 kzwi6,sum(FKIMG) FKIMG,decode(sum(FKIMG),0,0,sum(kzwi6)/sum(FKIMG)) sj from         (select NAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from (SELECT         vc.VARIETY_CLASS NAME,"SUM"(kzwi6) kzwi6,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss')         and sale_body = '专业公司' or sale_body = '专业公司' then fkimg end)         zyfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)         fgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部' or sale_body='子公司' or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)         zgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         (select max(DATA.Name)         from scm_delivery_detail detail         JOIN crm_resource_data DATA         ON DATA.full_name = detail.ext         AND DATA.company_id = detail.company_id         AND (DATA.TYPE = 6 )         where  detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  <> 'X' or         detail.delivery_delete is null)) cxname,         sso.sale_body ss,         (select max(detail.ext)         from scm_delivery_detail detail         where settle.company_id = detail.company_id         and settle.vgbel = detail.deliv_numb         and settle.vgpos = detail.deliv_item         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')          and  settle.company_id in ('9580','9727','9193')          order by settle.id desc) t         LEFT JOIN SCM_VARIETY_CLASS vc         on t.cxname = vc.name         where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                       where cfd.data_type in ('5','10')                                 and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)         and vc.VARIETY_CLASS is not null         group by  vc.VARIETY_CLASS ) a            union all         (select NAME COMPANYNAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from (         SELECT          vc.VARIETY_CLASS NAME,         "SUM"(kzwi6) kzwi6,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '专业公司' then fkimg end)         zyfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)         fgsfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部'  or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)         zgsfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         sso.sale_body ss,         (select max(DATA.Name)         from scm_delivery_detail detail         JOIN crm_resource_data DATA         ON DATA.full_name = detail.ext         AND DATA.company_id = detail.company_id         AND (DATA.TYPE = 6 )         where  detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  <> 'X' or         detail.delivery_delete is null)) cxname,          (select max(detail.ext)         from scm_delivery_detail detail         where  detail.DELIV_NUMB = settle.vgbel         and detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and  settle.company_id in ('9196')          order by settle.id desc) t         LEFT JOIN SCM_VARIETY_CLASS vc         on t.cxname = vc.name         where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                        where cfd.data_type in ('5','10')                                 and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)         and vc.VARIETY_CLASS is not null         group by  vc.VARIETY_CLASS )         )           union all          ( select name,kzwi6,(nvl(zyfkimg,0)+ nvl(fgsfkimg,0) +nvl(zgsfkimg,0)+nvl(ckfkimg,0)) fkimg,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from         (         select VARIETY_CLASS name,"SUM"(kzwi6) kzwi6,         sum(case when company_id = '1932'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_group = '销售部' then case when fkimg is null then 0 else fkimg end end end)         zyfkimg,          sum( case when company_id='8110' then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sggl = '分公司'  or sggl = '出口'  then fkimg end else null end )         fgsfkimg,          sum(case when company_id = '1932'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '科技部')  then fkimg end         when company_id ='8493'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '营销中心' or sale_group ='1000' )  then fkimg end end)         zgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (company_id = '1932' and sale_group = '舞钢国贸') or sggl ='出口' then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         sso.sale_body sggl,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         case when  settle.company_id ='1932' then '中厚板' when  settle.company_id ='8110' then '圆钢' when settle.company_id ='8493'then '薄板'  end  VARIETY_CLASS,          (select case when  B.company_id ='1932' then '舞钢中厚板' when  B.company_id ='8110' then '石钢圆钢' when B.company_id ='8493'then '衡板薄板' else b.variety end VARIETY         from scm_sale_order sso         JOIN scm_variety_to_pt_gp B         ON sso.product_code = B.product_group         and sso.company_id = B.company_id         where sso.order_no = settle.aubel         and sso.ORDER_ROW = settle.AUPOS         AND sso.company_id = settle.company_id) cxname,         (select max(detail.ext)         from scm_delivery_detail detail          where settle.company_id = detail.company_id         and settle.vgbel = detail.deliv_numb         and settle.vgpos = detail.deliv_item         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and  settle.company_id in ('8110','8493','1932')          order by settle.id desc) t          where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                        where cfd.data_type in ('5','10')                                    and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)         and vc.VARIETY_CLASS is not null         group by t.VARIETY_CLASS  )         )          )                     group by rollup(name) )         order by "DECODE"(companyname,'合计','1','热板','2','冷板','3','宽厚板','4','棒线','5','型带','6','特钢','7','薄板','8')
### Cause: java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:234)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
	at com.sun.proxy.$Proxy105.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.executeForMany(PageMapperMethod.java:173)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.execute(PageMapperMethod.java:86)
	at com.baomidou.mybatisplus.core.override.PageMapperProxy.invoke(PageMapperProxy.java:64)
	at com.sun.proxy.$Proxy127.getyxybpz(Unknown Source)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService.getyxybpz(ScmSteelSettleService.java:165)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$FastClassBySpringCGLIB$$b0370e9a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$EnhancerBySpringCGLIB$$bce8c862.getyxybpz(<generated>)
	at cn.hbis.erp.modular.system.controller.YxybController.getyxybpz(YxybController.java:47)
	at cn.hbis.erp.modular.system.controller.YxybController$$FastClassBySpringCGLIB$$c43b9fad.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at cn.hbis.erp.core.interceptor.SessionHolderInterceptor.sessionKit(SessionHolderInterceptor.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.controller.YxybController$$EnhancerBySpringCGLIB$$512cb358.getyxybpz(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
	at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at cn.stylefeng.roses.core.xss.XssFilter.doFilter(XssFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:123)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:791)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.sql.SQLSyntaxErrorException: ORA-00904: "VC"."VARIETY_CLASS": 标识符无效

	at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:439)
	at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:395)
	at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:802)
	at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:436)
	at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
	at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:521)
	at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:205)
	at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:861)
	at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1145)
	at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1267)
	at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3449)
	at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3550)
	at oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1374)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3409)
	at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:440)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3407)
	at com.alibaba.druid.wall.WallFilter.preparedStatement_execute(WallFilter.java:620)
	at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3407)
	at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:167)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:498)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy169.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:63)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy167.query(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:326)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:148)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	... 112 common frames omitted

2019-06-18 11:29:33.906 ERROR 11080 --- [http-nio-8081-exec-6] c.h.erp.core.aop.GlobalExceptionHandler  : 运行时异常:

org.springframework.jdbc.UncategorizedSQLException: 
### Error querying database.  Cause: java.sql.SQLException: sql injection violation, syntax error: TODO pos 14819, line 414, column 35, token NULL : select COMPANYNAME, kzwi6, FKIMG, sj from
        (select nvl(name,'合计') COMPANYNAME, "SUM"(kzwi6)/10000 kzwi6,sum(FKIMG) FKIMG,decode(sum(FKIMG),0,0,sum(kzwi6)/sum(FKIMG)) sj from
        (select NAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from (SELECT
        vc.VARIETY_CLASS NAME,"SUM"(kzwi6) kzwi6,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss')
        and sale_body = '专业公司' or sale_body = '专业公司' then fkimg end)
        zyfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)
        fgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部' or sale_body='子公司' or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)
        zgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )
        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) cxname,
        sso.sale_body ss,
        (select max(detail.ext)
        from scm_delivery_detail detail
        where settle.company_id = detail.company_id
        and settle.vgbel = detail.deliv_numb
        and settle.vgpos = detail.deliv_item
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')

        and  settle.company_id in ('9580','9727','9193')

        order by settle.id desc) t
        LEFT JOIN SCM_VARIETY_CLASS vc
        on t.cxname = vc.name
        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd
         
            where cfd.data_type in ('5','10')


         

         

        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and vc.VARIETY_CLASS is not null
        group by  vc.VARIETY_CLASS ) a



        union all
        (select NAME COMPANYNAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from (
        SELECT

        vc.VARIETY_CLASS NAME,
        "SUM"(kzwi6) kzwi6,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '专业公司' then fkimg end)
        zyfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)
        fgsfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部'  or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)
        zgsfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        sso.sale_body ss,
        (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )
        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) cxname,

        (select max(detail.ext)
        from scm_delivery_detail detail
        where  detail.DELIV_NUMB = settle.vgbel
        and detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and  settle.company_id in ('9196')

        order by settle.id desc) t
        LEFT JOIN SCM_VARIETY_CLASS vc
        on t.cxname = vc.name
        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd

         
            where cfd.data_type in ('5','10')


         

         

        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and vc.VARIETY_CLASS is not null
        group by  vc.VARIETY_CLASS )
        )


        union all

        ( select name,kzwi6,(nvl(zyfkimg,0)+ nvl(fgsfkimg,0) +nvl(zgsfkimg,0)+nvl(ckfkimg,0)) fkimg,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from
        (
        select VARIETY_CLASS name,"SUM"(kzwi6) kzwi6,
        sum(case when company_id = '1932'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_group = '销售部' then case when fkimg is null then 0 else fkimg end end end)
        zyfkimg,

        sum( case when company_id='8110' then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sggl = '分公司'  or sggl = '出口'  then fkimg end else null end )
        fgsfkimg,

        sum(case when company_id = '1932'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '科技部')  then fkimg end
        when company_id ='8493'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '营销中心' or sale_group ='1000' )  then fkimg end end)
        zgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (company_id = '1932' and sale_group = '舞钢国贸') or sggl ='出口' then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        sso.sale_body sggl,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        case when  settle.company_id ='1932' then '中厚板' when  settle.company_id ='8110' then '圆钢' when settle.company_id ='8493'then '薄板'  end  VARIETY_CLASS,

        (select case when  B.company_id ='1932' then '舞钢中厚板' when  B.company_id ='8110' then '石钢圆钢' when B.company_id ='8493'then '衡板薄板' else b.variety end VARIETY
        from scm_sale_order sso
        JOIN scm_variety_to_pt_gp B
        ON sso.product_code = B.product_group
        and sso.company_id = B.company_id
        where sso.order_no = settle.aubel
        and sso.ORDER_ROW = settle.AUPOS
        AND sso.company_id = settle.company_id) cxname,
        (select max(detail.ext)
        from scm_delivery_detail detail

        where settle.company_id = detail.company_id
        and settle.vgbel = detail.deliv_numb
        and settle.vgpos = detail.deliv_item
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and  settle.company_id in ('8110','8493','1932')

        order by settle.id desc) t

        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd

         
            where cfd.data_type in ('5','10')


         

         




        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and t.VARIETY_CLASSis not null
        group by t.VARIETY_CLASS  )
        )

        )

         

        group by rollup(name) )
        order by "DECODE"(companyname,'合计','1','热板','2','冷板','3','宽厚板','4','棒线','5','型带','6','特钢','7','薄板','8')
### The error may exist in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\mapping\ScmSteelSettleMapper.xml]
### The error may involve cn.hbis.erp.modular.system.mapper.ScmSteelSettleMapper.getyxybpz
### The error occurred while executing a query
### SQL: select COMPANYNAME, kzwi6, FKIMG, sj from         (select nvl(name,'合计') COMPANYNAME, "SUM"(kzwi6)/10000 kzwi6,sum(FKIMG) FKIMG,decode(sum(FKIMG),0,0,sum(kzwi6)/sum(FKIMG)) sj from         (select NAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from (SELECT         vc.VARIETY_CLASS NAME,"SUM"(kzwi6) kzwi6,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss')         and sale_body = '专业公司' or sale_body = '专业公司' then fkimg end)         zyfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)         fgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部' or sale_body='子公司' or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)         zgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         (select max(DATA.Name)         from scm_delivery_detail detail         JOIN crm_resource_data DATA         ON DATA.full_name = detail.ext         AND DATA.company_id = detail.company_id         AND (DATA.TYPE = 6 )         where  detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  <> 'X' or         detail.delivery_delete is null)) cxname,         sso.sale_body ss,         (select max(detail.ext)         from scm_delivery_detail detail         where settle.company_id = detail.company_id         and settle.vgbel = detail.deliv_numb         and settle.vgpos = detail.deliv_item         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')          and  settle.company_id in ('9580','9727','9193')          order by settle.id desc) t         LEFT JOIN SCM_VARIETY_CLASS vc         on t.cxname = vc.name         where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                       where cfd.data_type in ('5','10')                                 and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)         and vc.VARIETY_CLASS is not null         group by  vc.VARIETY_CLASS ) a            union all         (select NAME COMPANYNAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from (         SELECT          vc.VARIETY_CLASS NAME,         "SUM"(kzwi6) kzwi6,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '专业公司' then fkimg end)         zyfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)         fgsfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部'  or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)         zgsfkimg,         sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         sso.sale_body ss,         (select max(DATA.Name)         from scm_delivery_detail detail         JOIN crm_resource_data DATA         ON DATA.full_name = detail.ext         AND DATA.company_id = detail.company_id         AND (DATA.TYPE = 6 )         where  detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  <> 'X' or         detail.delivery_delete is null)) cxname,          (select max(detail.ext)         from scm_delivery_detail detail         where  detail.DELIV_NUMB = settle.vgbel         and detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and  settle.company_id in ('9196')          order by settle.id desc) t         LEFT JOIN SCM_VARIETY_CLASS vc         on t.cxname = vc.name         where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                        where cfd.data_type in ('5','10')                                 and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)         and vc.VARIETY_CLASS is not null         group by  vc.VARIETY_CLASS )         )           union all          ( select name,kzwi6,(nvl(zyfkimg,0)+ nvl(fgsfkimg,0) +nvl(zgsfkimg,0)+nvl(ckfkimg,0)) fkimg,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg         from         (         select VARIETY_CLASS name,"SUM"(kzwi6) kzwi6,         sum(case when company_id = '1932'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_group = '销售部' then case when fkimg is null then 0 else fkimg end end end)         zyfkimg,          sum( case when company_id='8110' then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sggl = '分公司'  or sggl = '出口'  then fkimg end else null end )         fgsfkimg,          sum(case when company_id = '1932'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '科技部')  then fkimg end         when company_id ='8493'  then         case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '营销中心' or sale_group ='1000' )  then fkimg end end)         zgsfkimg,          sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (company_id = '1932' and sale_group = '舞钢国贸') or sggl ='出口' then fkimg end)         ckfkimg          from (SELECT         distinct decode(settle.company_id,         9580,         '唐钢',         9727,         '邯钢',         9193,         '宣钢',         9196,         '承钢',         1932,         '舞钢',         8110,         '石钢',         8493,         '衡板',         7778,         '邯宝') AS companyname,         settle.company_id,         xsztdzb.sale_body,         sso.sale_body sggl,         rpcl.product_grade,         case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,         settle.id,         settle.fkdat,         settle.kzwi6,         sso.order_mount,         sso.order_type_describe,         sso.saler_name,         sso.sale_group,         case when  settle.company_id ='1932' then '中厚板' when  settle.company_id ='8110' then '圆钢' when settle.company_id ='8493'then '薄板'  end  VARIETY_CLASS,          (select case when  B.company_id ='1932' then '舞钢中厚板' when  B.company_id ='8110' then '石钢圆钢' when B.company_id ='8493'then '衡板薄板' else b.variety end VARIETY         from scm_sale_order sso         JOIN scm_variety_to_pt_gp B         ON sso.product_code = B.product_group         and sso.company_id = B.company_id         where sso.order_no = settle.aubel         and sso.ORDER_ROW = settle.AUPOS         AND sso.company_id = settle.company_id) cxname,         (select max(detail.ext)         from scm_delivery_detail detail          where settle.company_id = detail.company_id         and settle.vgbel = detail.deliv_numb         and settle.vgpos = detail.deliv_item         and ( detail.delivery_delete  != 'X'  or         detail.delivery_delete is null))product_line         FROM scm_steel_settle settle         left join scm_sale_order sso         on settle.company_id = sso.company_id         and settle.aubel = sso.order_no         and settle.aupos = sso.order_row         left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb         ON sso.company_id = xsztdzb.company_id         AND sso.sale_body = xsztdzb.sale_body_des         inner join scm_variety_to_pt_gp svtp         on sso.company_id = svtp.company_id         and sso.product_code = svtp.product_group          left join (SELECT a.company_id,         a.product_class,         a.product_line_class,         a.product_class_crude,         a.product_class_fine,         a.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL a         where a.status = '0'         union all         SELECT b.company_id,         b.second_code,         b.product_line_class,         b.product_class_crude,         b.product_class_fine,         b.product_grade         FROM REPORT_PRODUCT_CLASS_LEVEL b         where b.status = '0') rpcl         on sso.company_id = rpcl.company_id         and sso.product_type = rpcl.product_class         where         settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')         and  settle.company_id in ('8110','8493','1932')          order by settle.id desc) t          where t.order_type_describe not in         (select distinct cfd.data_name         from crm_filter_data cfd                        where cfd.data_type in ('5','10')                                    and cfd.status = '0'         and cfd.company_id = t.company_id)         and t.saler_name not in         (select cfd.data_name         from crm_filter_data cfd         where cfd.data_type = '1'         and cfd.status = '0'         and cfd.company_id = t.company_id         and instr(concat(t.product_line, t.company_id),         concat(cfd.product_line, cfd.company_id)) > 0)         AND t.sale_group NOT IN (SELECT cfd.data_name         FROM crm_filter_data cfd         WHERE cfd.company_id = t.company_id         AND cfd.data_type = 9         AND cfd.status = 0)         and t.VARIETY_CLASSis not null         group by t.VARIETY_CLASS  )         )          )                     group by rollup(name) )         order by "DECODE"(companyname,'合计','1','热板','2','冷板','3','宽厚板','4','棒线','5','型带','6','特钢','7','薄板','8')
### Cause: java.sql.SQLException: sql injection violation, syntax error: TODO pos 14819, line 414, column 35, token NULL : select COMPANYNAME, kzwi6, FKIMG, sj from
        (select nvl(name,'合计') COMPANYNAME, "SUM"(kzwi6)/10000 kzwi6,sum(FKIMG) FKIMG,decode(sum(FKIMG),0,0,sum(kzwi6)/sum(FKIMG)) sj from
        (select NAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from (SELECT
        vc.VARIETY_CLASS NAME,"SUM"(kzwi6) kzwi6,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss')
        and sale_body = '专业公司' or sale_body = '专业公司' then fkimg end)
        zyfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)
        fgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部' or sale_body='子公司' or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)
        zgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )
        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) cxname,
        sso.sale_body ss,
        (select max(detail.ext)
        from scm_delivery_detail detail
        where settle.company_id = detail.company_id
        and settle.vgbel = detail.deliv_numb
        and settle.vgpos = detail.deliv_item
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')

        and  settle.company_id in ('9580','9727','9193')

        order by settle.id desc) t
        LEFT JOIN SCM_VARIETY_CLASS vc
        on t.cxname = vc.name
        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd
         
            where cfd.data_type in ('5','10')


         

         

        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and vc.VARIETY_CLASS is not null
        group by  vc.VARIETY_CLASS ) a



        union all
        (select NAME COMPANYNAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from (
        SELECT

        vc.VARIETY_CLASS NAME,
        "SUM"(kzwi6) kzwi6,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '专业公司' then fkimg end)
        zyfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)
        fgsfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部'  or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)
        zgsfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        sso.sale_body ss,
        (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )
        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) cxname,

        (select max(detail.ext)
        from scm_delivery_detail detail
        where  detail.DELIV_NUMB = settle.vgbel
        and detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and  settle.company_id in ('9196')

        order by settle.id desc) t
        LEFT JOIN SCM_VARIETY_CLASS vc
        on t.cxname = vc.name
        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd

         
            where cfd.data_type in ('5','10')


         

         

        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and vc.VARIETY_CLASS is not null
        group by  vc.VARIETY_CLASS )
        )


        union all

        ( select name,kzwi6,(nvl(zyfkimg,0)+ nvl(fgsfkimg,0) +nvl(zgsfkimg,0)+nvl(ckfkimg,0)) fkimg,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from
        (
        select VARIETY_CLASS name,"SUM"(kzwi6) kzwi6,
        sum(case when company_id = '1932'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_group = '销售部' then case when fkimg is null then 0 else fkimg end end end)
        zyfkimg,

        sum( case when company_id='8110' then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sggl = '分公司'  or sggl = '出口'  then fkimg end else null end )
        fgsfkimg,

        sum(case when company_id = '1932'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '科技部')  then fkimg end
        when company_id ='8493'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '营销中心' or sale_group ='1000' )  then fkimg end end)
        zgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (company_id = '1932' and sale_group = '舞钢国贸') or sggl ='出口' then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        sso.sale_body sggl,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        case when  settle.company_id ='1932' then '中厚板' when  settle.company_id ='8110' then '圆钢' when settle.company_id ='8493'then '薄板'  end  VARIETY_CLASS,

        (select case when  B.company_id ='1932' then '舞钢中厚板' when  B.company_id ='8110' then '石钢圆钢' when B.company_id ='8493'then '衡板薄板' else b.variety end VARIETY
        from scm_sale_order sso
        JOIN scm_variety_to_pt_gp B
        ON sso.product_code = B.product_group
        and sso.company_id = B.company_id
        where sso.order_no = settle.aubel
        and sso.ORDER_ROW = settle.AUPOS
        AND sso.company_id = settle.company_id) cxname,
        (select max(detail.ext)
        from scm_delivery_detail detail

        where settle.company_id = detail.company_id
        and settle.vgbel = detail.deliv_numb
        and settle.vgpos = detail.deliv_item
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and  settle.company_id in ('8110','8493','1932')

        order by settle.id desc) t

        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd

         
            where cfd.data_type in ('5','10')


         

         




        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and t.VARIETY_CLASSis not null
        group by t.VARIETY_CLASS  )
        )

        )

         

        group by rollup(name) )
        order by "DECODE"(companyname,'合计','1','热板','2','冷板','3','宽厚板','4','棒线','5','型带','6','特钢','7','薄板','8')
; uncategorized SQLException; SQL state [null]; error code [0]; sql injection violation, syntax error: TODO pos 14819, line 414, column 35, token NULL : select COMPANYNAME, kzwi6, FKIMG, sj from
        (select nvl(name,'合计') COMPANYNAME, "SUM"(kzwi6)/10000 kzwi6,sum(FKIMG) FKIMG,decode(sum(FKIMG),0,0,sum(kzwi6)/sum(FKIMG)) sj from
        (select NAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from (SELECT
        vc.VARIETY_CLASS NAME,"SUM"(kzwi6) kzwi6,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss')
        and sale_body = '专业公司' or sale_body = '专业公司' then fkimg end)
        zyfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)
        fgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部' or sale_body='子公司' or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)
        zgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )
        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) cxname,
        sso.sale_body ss,
        (select max(detail.ext)
        from scm_delivery_detail detail
        where settle.company_id = detail.company_id
        and settle.vgbel = detail.deliv_numb
        and settle.vgpos = detail.deliv_item
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')

        and  settle.company_id in ('9580','9727','9193')

        order by settle.id desc) t
        LEFT JOIN SCM_VARIETY_CLASS vc
        on t.cxname = vc.name
        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd
         
            where cfd.data_type in ('5','10')


         

         

        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and vc.VARIETY_CLASS is not null
        group by  vc.VARIETY_CLASS ) a



        union all
        (select NAME COMPANYNAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from (
        SELECT

        vc.VARIETY_CLASS NAME,
        "SUM"(kzwi6) kzwi6,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '专业公司' then fkimg end)
        zyfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)
        fgsfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部'  or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)
        zgsfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        sso.sale_body ss,
        (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )
        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) cxname,

        (select max(detail.ext)
        from scm_delivery_detail detail
        where  detail.DELIV_NUMB = settle.vgbel
        and detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and  settle.company_id in ('9196')

        order by settle.id desc) t
        LEFT JOIN SCM_VARIETY_CLASS vc
        on t.cxname = vc.name
        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd

         
            where cfd.data_type in ('5','10')


         

         

        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and vc.VARIETY_CLASS is not null
        group by  vc.VARIETY_CLASS )
        )


        union all

        ( select name,kzwi6,(nvl(zyfkimg,0)+ nvl(fgsfkimg,0) +nvl(zgsfkimg,0)+nvl(ckfkimg,0)) fkimg,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from
        (
        select VARIETY_CLASS name,"SUM"(kzwi6) kzwi6,
        sum(case when company_id = '1932'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_group = '销售部' then case when fkimg is null then 0 else fkimg end end end)
        zyfkimg,

        sum( case when company_id='8110' then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sggl = '分公司'  or sggl = '出口'  then fkimg end else null end )
        fgsfkimg,

        sum(case when company_id = '1932'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '科技部')  then fkimg end
        when company_id ='8493'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '营销中心' or sale_group ='1000' )  then fkimg end end)
        zgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (company_id = '1932' and sale_group = '舞钢国贸') or sggl ='出口' then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        sso.sale_body sggl,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        case when  settle.company_id ='1932' then '中厚板' when  settle.company_id ='8110' then '圆钢' when settle.company_id ='8493'then '薄板'  end  VARIETY_CLASS,

        (select case when  B.company_id ='1932' then '舞钢中厚板' when  B.company_id ='8110' then '石钢圆钢' when B.company_id ='8493'then '衡板薄板' else b.variety end VARIETY
        from scm_sale_order sso
        JOIN scm_variety_to_pt_gp B
        ON sso.product_code = B.product_group
        and sso.company_id = B.company_id
        where sso.order_no = settle.aubel
        and sso.ORDER_ROW = settle.AUPOS
        AND sso.company_id = settle.company_id) cxname,
        (select max(detail.ext)
        from scm_delivery_detail detail

        where settle.company_id = detail.company_id
        and settle.vgbel = detail.deliv_numb
        and settle.vgpos = detail.deliv_item
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and  settle.company_id in ('8110','8493','1932')

        order by settle.id desc) t

        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd

         
            where cfd.data_type in ('5','10')


         

         




        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and t.VARIETY_CLASSis not null
        group by t.VARIETY_CLASS  )
        )

        )

         

        group by rollup(name) )
        order by "DECODE"(companyname,'合计','1','热板','2','冷板','3','宽厚板','4','棒线','5','型带','6','特钢','7','薄板','8'); nested exception is java.sql.SQLException: sql injection violation, syntax error: TODO pos 14819, line 414, column 35, token NULL : select COMPANYNAME, kzwi6, FKIMG, sj from
        (select nvl(name,'合计') COMPANYNAME, "SUM"(kzwi6)/10000 kzwi6,sum(FKIMG) FKIMG,decode(sum(FKIMG),0,0,sum(kzwi6)/sum(FKIMG)) sj from
        (select NAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from (SELECT
        vc.VARIETY_CLASS NAME,"SUM"(kzwi6) kzwi6,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss')
        and sale_body = '专业公司' or sale_body = '专业公司' then fkimg end)
        zyfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)
        fgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部' or sale_body='子公司' or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)
        zgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )
        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) cxname,
        sso.sale_body ss,
        (select max(detail.ext)
        from scm_delivery_detail detail
        where settle.company_id = detail.company_id
        and settle.vgbel = detail.deliv_numb
        and settle.vgpos = detail.deliv_item
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')

        and  settle.company_id in ('9580','9727','9193')

        order by settle.id desc) t
        LEFT JOIN SCM_VARIETY_CLASS vc
        on t.cxname = vc.name
        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd
         
            where cfd.data_type in ('5','10')


         

         

        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and vc.VARIETY_CLASS is not null
        group by  vc.VARIETY_CLASS ) a



        union all
        (select NAME COMPANYNAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from (
        SELECT

        vc.VARIETY_CLASS NAME,
        "SUM"(kzwi6) kzwi6,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '专业公司' then fkimg end)
        zyfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)
        fgsfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部'  or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)
        zgsfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        sso.sale_body ss,
        (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )
        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) cxname,

        (select max(detail.ext)
        from scm_delivery_detail detail
        where  detail.DELIV_NUMB = settle.vgbel
        and detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and  settle.company_id in ('9196')

        order by settle.id desc) t
        LEFT JOIN SCM_VARIETY_CLASS vc
        on t.cxname = vc.name
        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd

         
            where cfd.data_type in ('5','10')


         

         

        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and vc.VARIETY_CLASS is not null
        group by  vc.VARIETY_CLASS )
        )


        union all

        ( select name,kzwi6,(nvl(zyfkimg,0)+ nvl(fgsfkimg,0) +nvl(zgsfkimg,0)+nvl(ckfkimg,0)) fkimg,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from
        (
        select VARIETY_CLASS name,"SUM"(kzwi6) kzwi6,
        sum(case when company_id = '1932'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_group = '销售部' then case when fkimg is null then 0 else fkimg end end end)
        zyfkimg,

        sum( case when company_id='8110' then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sggl = '分公司'  or sggl = '出口'  then fkimg end else null end )
        fgsfkimg,

        sum(case when company_id = '1932'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '科技部')  then fkimg end
        when company_id ='8493'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '营销中心' or sale_group ='1000' )  then fkimg end end)
        zgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (company_id = '1932' and sale_group = '舞钢国贸') or sggl ='出口' then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        sso.sale_body sggl,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        case when  settle.company_id ='1932' then '中厚板' when  settle.company_id ='8110' then '圆钢' when settle.company_id ='8493'then '薄板'  end  VARIETY_CLASS,

        (select case when  B.company_id ='1932' then '舞钢中厚板' when  B.company_id ='8110' then '石钢圆钢' when B.company_id ='8493'then '衡板薄板' else b.variety end VARIETY
        from scm_sale_order sso
        JOIN scm_variety_to_pt_gp B
        ON sso.product_code = B.product_group
        and sso.company_id = B.company_id
        where sso.order_no = settle.aubel
        and sso.ORDER_ROW = settle.AUPOS
        AND sso.company_id = settle.company_id) cxname,
        (select max(detail.ext)
        from scm_delivery_detail detail

        where settle.company_id = detail.company_id
        and settle.vgbel = detail.deliv_numb
        and settle.vgpos = detail.deliv_item
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and  settle.company_id in ('8110','8493','1932')

        order by settle.id desc) t

        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd

         
            where cfd.data_type in ('5','10')


         

         




        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and t.VARIETY_CLASSis not null
        group by t.VARIETY_CLASS  )
        )

        )

         

        group by rollup(name) )
        order by "DECODE"(companyname,'合计','1','热板','2','冷板','3','宽厚板','4','棒线','5','型带','6','特钢','7','薄板','8')
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:89)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
	at com.sun.proxy.$Proxy105.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.executeForMany(PageMapperMethod.java:173)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.execute(PageMapperMethod.java:86)
	at com.baomidou.mybatisplus.core.override.PageMapperProxy.invoke(PageMapperProxy.java:64)
	at com.sun.proxy.$Proxy127.getyxybpz(Unknown Source)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService.getyxybpz(ScmSteelSettleService.java:165)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$FastClassBySpringCGLIB$$b0370e9a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$EnhancerBySpringCGLIB$$4b104401.getyxybpz(<generated>)
	at cn.hbis.erp.modular.system.controller.YxybController.getyxybpz(YxybController.java:47)
	at cn.hbis.erp.modular.system.controller.YxybController$$FastClassBySpringCGLIB$$c43b9fad.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at cn.hbis.erp.core.interceptor.SessionHolderInterceptor.sessionKit(SessionHolderInterceptor.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.controller.YxybController$$EnhancerBySpringCGLIB$$4965623b.getyxybpz(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
	at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at cn.stylefeng.roses.core.xss.XssFilter.doFilter(XssFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:123)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:791)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.sql.SQLException: sql injection violation, syntax error: TODO pos 14819, line 414, column 35, token NULL : select COMPANYNAME, kzwi6, FKIMG, sj from
        (select nvl(name,'合计') COMPANYNAME, "SUM"(kzwi6)/10000 kzwi6,sum(FKIMG) FKIMG,decode(sum(FKIMG),0,0,sum(kzwi6)/sum(FKIMG)) sj from
        (select NAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from (SELECT
        vc.VARIETY_CLASS NAME,"SUM"(kzwi6) kzwi6,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss')
        and sale_body = '专业公司' or sale_body = '专业公司' then fkimg end)
        zyfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)
        fgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部' or sale_body='子公司' or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)
        zgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )
        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) cxname,
        sso.sale_body ss,
        (select max(detail.ext)
        from scm_delivery_detail detail
        where settle.company_id = detail.company_id
        and settle.vgbel = detail.deliv_numb
        and settle.vgpos = detail.deliv_item
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')

        and  settle.company_id in ('9580','9727','9193')

        order by settle.id desc) t
        LEFT JOIN SCM_VARIETY_CLASS vc
        on t.cxname = vc.name
        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd
         
            where cfd.data_type in ('5','10')


         

         

        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and vc.VARIETY_CLASS is not null
        group by  vc.VARIETY_CLASS ) a



        union all
        (select NAME COMPANYNAME,kzwi6, (NVL(ZYFKIMG,0)+ NVL(FGSFKIMG,0)+ NVL(ZGSFKIMG,0)+ NVL(ckfkimg,0)) FKIMG,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from (
        SELECT

        vc.VARIETY_CLASS NAME,
        "SUM"(kzwi6) kzwi6,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '专业公司' then fkimg end)
        zyfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_body = '分公司' then fkimg end)
        fgsfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='事业部'  or sale_body  = '现货' or sale_body='自办公司')   then fkimg end)
        zgsfkimg,
        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_body ='出口')  then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        sso.sale_body ss,
        (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )
        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) cxname,

        (select max(detail.ext)
        from scm_delivery_detail detail
        where  detail.DELIV_NUMB = settle.vgbel
        and detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and  settle.company_id in ('9196')

        order by settle.id desc) t
        LEFT JOIN SCM_VARIETY_CLASS vc
        on t.cxname = vc.name
        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd

         
            where cfd.data_type in ('5','10')


         

         

        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and vc.VARIETY_CLASS is not null
        group by  vc.VARIETY_CLASS )
        )


        union all

        ( select name,kzwi6,(nvl(zyfkimg,0)+ nvl(fgsfkimg,0) +nvl(zgsfkimg,0)+nvl(ckfkimg,0)) fkimg,zyfkimg,fgsfkimg,zgsfkimg,ckfkimg
        from
        (
        select VARIETY_CLASS name,"SUM"(kzwi6) kzwi6,
        sum(case when company_id = '1932'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sale_group = '销售部' then case when fkimg is null then 0 else fkimg end end end)
        zyfkimg,

        sum( case when company_id='8110' then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and sggl = '分公司'  or sggl = '出口'  then fkimg end else null end )
        fgsfkimg,

        sum(case when company_id = '1932'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '科技部')  then fkimg end
        when company_id ='8493'  then
        case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (sale_group = '营销中心' or sale_group ='1000' )  then fkimg end end)
        zgsfkimg,

        sum(case when fkdat >= to_date (?,'yyyy-mm-dd hh24:mi:ss') and fkdat  <= to_date (?,'yyyy-mm-dd hh24:mi:ss') and (company_id = '1932' and sale_group = '舞钢国贸') or sggl ='出口' then fkimg end)
        ckfkimg

        from (SELECT
        distinct decode(settle.company_id,
        9580,
        '唐钢',
        9727,
        '邯钢',
        9193,
        '宣钢',
        9196,
        '承钢',
        1932,
        '舞钢',
        8110,
        '石钢',
        8493,
        '衡板',
        7778,
        '邯宝') AS companyname,
        settle.company_id,
        xsztdzb.sale_body,
        sso.sale_body sggl,
        rpcl.product_grade,
        case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
        settle.id,
        settle.fkdat,
        settle.kzwi6,
        sso.order_mount,
        sso.order_type_describe,
        sso.saler_name,
        sso.sale_group,
        case when  settle.company_id ='1932' then '中厚板' when  settle.company_id ='8110' then '圆钢' when settle.company_id ='8493'then '薄板'  end  VARIETY_CLASS,

        (select case when  B.company_id ='1932' then '舞钢中厚板' when  B.company_id ='8110' then '石钢圆钢' when B.company_id ='8493'then '衡板薄板' else b.variety end VARIETY
        from scm_sale_order sso
        JOIN scm_variety_to_pt_gp B
        ON sso.product_code = B.product_group
        and sso.company_id = B.company_id
        where sso.order_no = settle.aubel
        and sso.ORDER_ROW = settle.AUPOS
        AND sso.company_id = settle.company_id) cxname,
        (select max(detail.ext)
        from scm_delivery_detail detail

        where settle.company_id = detail.company_id
        and settle.vgbel = detail.deliv_numb
        and settle.vgpos = detail.deliv_item
        and ( detail.delivery_delete  != 'X'  or
        detail.delivery_delete is null))product_line
        FROM scm_steel_settle settle
        left join scm_sale_order sso
        on settle.company_id = sso.company_id
        and settle.aubel = sso.order_no
        and settle.aupos = sso.order_row
        left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
        ON sso.company_id = xsztdzb.company_id
        AND sso.sale_body = xsztdzb.sale_body_des
        inner join scm_variety_to_pt_gp svtp
        on sso.company_id = svtp.company_id
        and sso.product_code = svtp.product_group

        left join (SELECT a.company_id,
        a.product_class,
        a.product_line_class,
        a.product_class_crude,
        a.product_class_fine,
        a.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL a
        where a.status = '0'
        union all
        SELECT b.company_id,
        b.second_code,
        b.product_line_class,
        b.product_class_crude,
        b.product_class_fine,
        b.product_grade
        FROM REPORT_PRODUCT_CLASS_LEVEL b
        where b.status = '0') rpcl
        on sso.company_id = rpcl.company_id
        and sso.product_type = rpcl.product_class
        where
        settle.fkdat>= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
        and  settle.company_id in ('8110','8493','1932')

        order by settle.id desc) t

        where t.order_type_describe not in
        (select distinct cfd.data_name
        from crm_filter_data cfd

         
            where cfd.data_type in ('5','10')


         

         




        and cfd.status = '0'
        and cfd.company_id = t.company_id)
        and t.saler_name not in
        (select cfd.data_name
        from crm_filter_data cfd
        where cfd.data_type = '1'
        and cfd.status = '0'
        and cfd.company_id = t.company_id
        and instr(concat(t.product_line, t.company_id),
        concat(cfd.product_line, cfd.company_id)) > 0)
        AND t.sale_group NOT IN (SELECT cfd.data_name
        FROM crm_filter_data cfd
        WHERE cfd.company_id = t.company_id
        AND cfd.data_type = 9
        AND cfd.status = 0)
        and t.VARIETY_CLASSis not null
        group by t.VARIETY_CLASS  )
        )

        )

         

        group by rollup(name) )
        order by "DECODE"(companyname,'合计','1','热板','2','冷板','3','宽厚板','4','棒线','5','型带','6','特钢','7','薄板','8')
	at com.alibaba.druid.wall.WallFilter.checkInternal(WallFilter.java:799)
	at com.alibaba.druid.wall.WallFilter.connection_prepareStatement(WallFilter.java:252)
	at com.alibaba.druid.filter.FilterChainImpl.connection_prepareStatement(FilterChainImpl.java:568)
	at com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.prepareStatement(ConnectionProxyImpl.java:342)
	at com.alibaba.druid.pool.DruidPooledConnection.prepareStatement(DruidPooledConnection.java:349)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.ConnectionLogger.invoke(ConnectionLogger.java:55)
	at com.sun.proxy.$Proxy168.prepareStatement(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.instantiateStatement(PreparedStatementHandler.java:87)
	at org.apache.ibatis.executor.statement.BaseStatementHandler.prepare(BaseStatementHandler.java:88)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.prepare(RoutingStatementHandler.java:59)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Invocation.proceed(Invocation.java:49)
	at com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor.intercept(PaginationInterceptor.java:158)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:61)
	at com.sun.proxy.$Proxy167.prepare(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:85)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:62)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:326)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:148)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	... 112 common frames omitted
Caused by: com.alibaba.druid.sql.parser.ParserException: TODO pos 14819, line 414, column 35, token NULL
	at com.alibaba.druid.sql.parser.SQLExprParser.notRationalRest(SQLExprParser.java:2491)
	at com.alibaba.druid.sql.parser.SQLExprParser.relationalRest(SQLExprParser.java:2244)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleExprParser.relationalRest(OracleExprParser.java:1055)
	at com.alibaba.druid.sql.parser.SQLExprParser.relational(SQLExprParser.java:2065)
	at com.alibaba.druid.sql.parser.SQLExprParser.andRest(SQLExprParser.java:1939)
	at com.alibaba.druid.sql.parser.SQLExprParser.exprRest(SQLExprParser.java:112)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleExprParser.exprRest(OracleExprParser.java:1223)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseWhere(SQLSelectParser.java:473)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.query(OracleSelectParser.java:306)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.select(OracleSelectParser.java:75)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.parseTableSourcePrimary(OracleSelectParser.java:622)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.parseTableSource(OracleSelectParser.java:607)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseFrom(SQLSelectParser.java:666)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.query(OracleSelectParser.java:304)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.query(OracleSelectParser.java:266)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.queryRest(OracleSelectParser.java:334)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.query(OracleSelectParser.java:269)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.queryRest(OracleSelectParser.java:334)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.query(OracleSelectParser.java:316)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.select(OracleSelectParser.java:75)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.parseTableSourcePrimary(OracleSelectParser.java:622)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.parseTableSource(OracleSelectParser.java:607)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseFrom(SQLSelectParser.java:666)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.query(OracleSelectParser.java:304)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.select(OracleSelectParser.java:75)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.parseTableSourcePrimary(OracleSelectParser.java:622)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.parseTableSource(OracleSelectParser.java:607)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseFrom(SQLSelectParser.java:666)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.query(OracleSelectParser.java:304)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleSelectParser.select(OracleSelectParser.java:75)
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleStatementParser.parseStatementList(OracleStatementParser.java:96)
	at com.alibaba.druid.sql.parser.SQLStatementParser.parseStatementList(SQLStatementParser.java:83)
	at com.alibaba.druid.wall.WallProvider.checkInternal(WallProvider.java:624)
	at com.alibaba.druid.wall.WallProvider.check(WallProvider.java:578)
	at com.alibaba.druid.wall.WallFilter.checkInternal(WallFilter.java:786)
	... 146 common frames omitted

2019-06-18 11:37:04.494 ERROR 10676 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : init datasource error, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 11:37:04.509 ERROR 10676 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} init error

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 11:37:04.662 ERROR 10676 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'constantFactory' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\core\common\constant\factory\ConstantFactory.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1270)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:184)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	... 22 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	... 24 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	... 43 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	... 56 common frames omitted
Caused by: java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	... 67 common frames omitted
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 11:37:54.328 ERROR 10232 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : init datasource error, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 11:37:54.343 ERROR 10232 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} init error

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 11:37:54.437 ERROR 10232 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'constantFactory' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\core\common\constant\factory\ConstantFactory.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1270)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:184)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	... 22 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	... 24 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	... 43 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	... 56 common frames omitted
Caused by: java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	... 67 common frames omitted
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 14:43:56.666 ERROR 9628 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : init datasource error, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 14:43:56.697 ERROR 9628 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} init error

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 14:43:56.713 ERROR 9628 --- [Druid-ConnectionPool-Create-583882819] com.alibaba.druid.pool.DruidDataSource   : create connection SQLException, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1, errorCode 20, state 61000

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2505)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 12 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 17 common frames omitted

2019-06-18 14:43:56.728 ERROR 9628 --- [Druid-ConnectionPool-Create-583882819] com.alibaba.druid.pool.DruidDataSource   : create connection SQLException, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1, errorCode 20, state 61000

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2505)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 12 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 17 common frames omitted

2019-06-18 14:43:56.791 ERROR 9628 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'constantFactory' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\core\common\constant\factory\ConstantFactory.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1270)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:184)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	... 22 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	... 24 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	... 43 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	... 56 common frames omitted
Caused by: java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	... 67 common frames omitted
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 14:44:26.674 ERROR 10560 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : init datasource error, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 14:44:26.690 ERROR 10560 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} init error

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 14:44:26.705 ERROR 10560 --- [Druid-ConnectionPool-Create-2083800232] com.alibaba.druid.pool.DruidDataSource   : create connection SQLException, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1, errorCode 20, state 61000

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2505)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 12 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 17 common frames omitted

2019-06-18 14:44:26.721 ERROR 10560 --- [Druid-ConnectionPool-Create-2083800232] com.alibaba.druid.pool.DruidDataSource   : create connection SQLException, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1, errorCode 20, state 61000

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2505)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 12 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 17 common frames omitted

2019-06-18 14:44:26.914 ERROR 10560 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'constantFactory' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\core\common\constant\factory\ConstantFactory.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1270)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:184)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	... 22 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	... 24 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	... 43 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	... 56 common frames omitted
Caused by: java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	... 67 common frames omitted
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.NoRouteToHostException: No route to host: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 15:30:25.492 ERROR 10696 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : init datasource error, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 15:30:25.508 ERROR 10696 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} init error

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 15:30:25.709 ERROR 10696 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'constantFactory' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\core\common\constant\factory\ConstantFactory.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1270)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)
	at cn.hbis.erp.HbisApplication.main(HbisApplication.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [cn.hbis.erp.core.common.constant.factory.ConstantFactory]: Constructor threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:184)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1262)
	... 22 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roleMapper' defined in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\RoleMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1482)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1362)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:224)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1112)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:407)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:341)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:335)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1101)
	at cn.stylefeng.roses.core.util.SpringContextHolder.getBean(SpringContextHolder.java:50)
	at cn.hbis.erp.core.common.constant.factory.ConstantFactory.<init>(ConstantFactory.java:30)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172)
	... 24 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [com/baomidou/mybatisplus/autoconfigure/MybatisPlusAutoConfiguration.class]: Unsatisfied dependency expressed through method 'sqlSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1467)
	... 43 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [cn/stylefeng/roses/core/config/MybatisDataSourceAutoConfiguration.class]: Invocation of init method failed; nested exception is java.sql.SQLException: The Network Adapter could not establish the connection
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760)
	... 56 common frames omitted
Caused by: java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource.init(DruidDataSource.java:874)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1870)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1813)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)
	... 67 common frames omitted
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 86 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 91 common frames omitted

2019-06-18 16:40:39.032 ERROR 8236 --- [http-nio-8081-exec-6] c.h.erp.core.aop.GlobalExceptionHandler  : 运行时异常:

org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5003, active 0, maxActive 20, creating 1, createElapseMillis 10026
### The error may exist in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\mapping\ScmSteelSettleMapper.xml]
### The error may involve cn.hbis.erp.modular.system.mapper.ScmSteelSettleMapper.getyxybpz
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5003, active 0, maxActive 20, creating 1, createElapseMillis 10026
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:77)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
	at com.sun.proxy.$Proxy105.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.executeForMany(PageMapperMethod.java:173)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.execute(PageMapperMethod.java:86)
	at com.baomidou.mybatisplus.core.override.PageMapperProxy.invoke(PageMapperProxy.java:64)
	at com.sun.proxy.$Proxy127.getyxybpz(Unknown Source)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService.getyxybpz(ScmSteelSettleService.java:165)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$FastClassBySpringCGLIB$$b0370e9a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.service.ScmSteelSettleService$$EnhancerBySpringCGLIB$$3f6c584a.getyxybpz(<generated>)
	at cn.hbis.erp.modular.system.controller.YxybController.getyxybpz(YxybController.java:47)
	at cn.hbis.erp.modular.system.controller.YxybController$$FastClassBySpringCGLIB$$c43b9fad.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at cn.hbis.erp.core.interceptor.SessionHolderInterceptor.sessionKit(SessionHolderInterceptor.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.controller.YxybController$$EnhancerBySpringCGLIB$$376c1f55.getyxybpz(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
	at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at cn.stylefeng.roses.core.xss.XssFilter.doFilter(XssFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:123)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:791)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5003, active 0, maxActive 20, creating 1, createElapseMillis 10026
### The error may exist in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\mapping\ScmSteelSettleMapper.xml]
### The error may involve cn.hbis.erp.modular.system.mapper.ScmSteelSettleMapper.getyxybpz
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5003, active 0, maxActive 20, creating 1, createElapseMillis 10026
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:150)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	... 112 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5003, active 0, maxActive 20, creating 1, createElapseMillis 10026
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:82)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:68)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:338)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:84)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:62)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:326)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:148)
	... 118 common frames omitted
Caused by: com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5003, active 0, maxActive 20, creating 1, createElapseMillis 10026
	at com.alibaba.druid.pool.DruidDataSource.getConnectionInternal(DruidDataSource.java:1536)
	at com.alibaba.druid.pool.DruidDataSource.getConnectionDirect(DruidDataSource.java:1272)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5007)
	at com.alibaba.druid.filter.stat.StatFilter.dataSource_getConnection(StatFilter.java:680)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5003)
	at com.alibaba.druid.filter.FilterAdapter.dataSource_getConnection(FilterAdapter.java:2745)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5003)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1250)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1242)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:89)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy98.getConnection(Unknown Source)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:151)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:115)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:78)
	... 128 common frames omitted

2019-06-18 16:40:49.077 ERROR 8236 --- [pool-1-thread-1] cn.hbis.erp.core.log.LogManager          : 创建异常日志异常!

org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5015, active 0, maxActive 20, creating 1, createElapseMillis 20090
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5015, active 0, maxActive 20, creating 1, createElapseMillis 20090
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:77)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
	at com.sun.proxy.$Proxy105.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:278)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.execute(PageMapperMethod.java:68)
	at com.baomidou.mybatisplus.core.override.PageMapperProxy.invoke(PageMapperProxy.java:64)
	at com.sun.proxy.$Proxy128.insert(Unknown Source)
	at cn.hbis.erp.core.log.factory.LogTaskFactory$5.run(LogTaskFactory.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5015, active 0, maxActive 20, creating 1, createElapseMillis 20090
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5015, active 0, maxActive 20, creating 1, createElapseMillis 20090
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:200)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:185)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	... 13 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5015, active 0, maxActive 20, creating 1, createElapseMillis 20090
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:82)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:68)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:338)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:84)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:49)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:198)
	... 19 common frames omitted
Caused by: com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 5015, active 0, maxActive 20, creating 1, createElapseMillis 20090
	at com.alibaba.druid.pool.DruidDataSource.getConnectionInternal(DruidDataSource.java:1536)
	at com.alibaba.druid.pool.DruidDataSource.getConnectionDirect(DruidDataSource.java:1272)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5007)
	at com.alibaba.druid.filter.stat.StatFilter.dataSource_getConnection(StatFilter.java:680)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5003)
	at com.alibaba.druid.filter.FilterAdapter.dataSource_getConnection(FilterAdapter.java:2745)
	at com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl.java:5003)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1250)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:1242)
	at com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource.java:89)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy98.getConnection(Unknown Source)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:151)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:115)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:78)
	... 27 common frames omitted

2019-06-18 16:40:49.994 ERROR 8236 --- [Druid-ConnectionPool-Create-1551415870] com.alibaba.druid.pool.DruidDataSource   : create connection SQLException, url: jdbc:oracle:thin:@18.0.126.1:1521:coredb1, errorCode 20, state 61000

java.sql.SQLException: The Network Adapter could not establish the connection
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
	at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
	at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
	at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
	at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:156)
	at com.alibaba.druid.filter.stat.StatFilter.connection_connect(StatFilter.java:218)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.filter.FilterAdapter.connection_connect(FilterAdapter.java:786)
	at com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl.java:150)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1572)
	at com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource.java:1636)
	at com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2505)
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:359)
	at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:422)
	at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672)
	at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237)
	at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
	at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
	... 12 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:141)
	at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
	at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:337)
	... 17 common frames omitted

2019-06-18 17:19:58.804 ERROR 10852 --- [http-nio-8081-exec-6] c.h.erp.core.aop.GlobalExceptionHandler  : 运行时异常:

org.springframework.jdbc.UncategorizedSQLException: 
### Error querying database.  Cause: java.sql.SQLException: sql injection violation, syntax error: TODO : pos 15900, line 570, column 11, token AND : SELECT
    company_id,
    nvl(companyname,'-')companyname,
    nvl("TO_CHAR"(FKDAT,'yyyy-mm'),'-') month,
    nvl("TO_CHAR"(fkdat,'yyyy-mm-dd'),'-')fkdat,
    nvl(fkimg,0)fkimg,
    nvl(kzwi6,0) kzwi6,
    nvl(kzwi6*fkimg,0) money,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    nvl(DESTINATION_NAME,'-')DESTINATION_NAME,
    nvl(CONTRACT_NO,0)CONTRACT_NO,
    nvl(DJ_DATE,'-')DJ_DATE,
    nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl("TO_CHAR"(ACTUAL_DATE),'-')ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-') MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'空') VGPOS,
    nvl(ORDER_NO,'-') ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from
    (SELECT
    company_id,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-') MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'-') VGPOS,
    nvl(ORDER_NO,'-') ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,

    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from
    (SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    xsztdzb.sale_body,
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    settle.VBELN,
    settle.VGBEL,
    settle.VGPOS,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,
    sso.DJ_DATE,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.sale_body ss,
    sso.SALE_PRICE,
    svtp.VARIETY,
    (select max(DATA.Name)
    from scm_delivery_detail detail
    JOIN crm_resource_data DATA
    ON DATA.full_name = detail.ext
    AND DATA.company_id = detail.company_id
    AND (DATA.TYPE = 6 )
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X' or
    detail.delivery_delete is null)) name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle

    left join scm_sale_order sso

    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb

    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des

    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and  settle.company_id in ('9580','9727','9193')
    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')


     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
         

            and t.company_id = ?

         
    UNION
    SELECT
    company_id ,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,

    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-')  VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'-')  VGPOS,
    nvl(ORDER_NO,'-')  ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from (
    SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    xsztdzb.sale_body,
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    sso.DJ_DATE,
    settle.VBELN,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    settle.VGBEL,
    settle.VGPOS,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.sale_body ss,
    sso.SALE_PRICE,
    svtp.VARIETY,
   (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )

        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
        from scm_delivery_detail detail
        where detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  < > 'X'  or
        detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle
    left join scm_sale_order sso
    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des
    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')

    and  settle.company_id in ('9196')
    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')


     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
         

            and t.company_id = ?

         
    UNION
    SELECT
    company_id,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,
    nvl(name,'-')  name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,
    nvl(PAYER_NAME,'-')  PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-')  VGBEL,
    nvl(VGPOS,'-')  VGPOS,
    nvl(ORDER_NO,'-')  ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from (
    SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    case when  settle.company_id='8110' then  sso.sale_body  else '' end  sggl,
    xsztdzb.sale_body，
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    settle.VBELN,
    settle.VGBEL,
    settle.VGPOS,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,

    sso.DJ_DATE,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.SALE_PRICE,
    svtp.VARIETY,
    decode(settle.company_id,
    1932,
    '宽厚板',
    8110,
    '特钢',
    8493,
    '薄板') AS name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle
    left join scm_sale_order sso
    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des
    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and  settle.company_id in ('8110','8493','1932')

    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')
     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
    and (
        t.sggl = '分公司'
        or t.sale_group = '销售部'
        or  t.sale_group = '营销中心'
        or  t.sale_group ='1000'
        or  t.sale_group = '科技部')
        )
         

            and t.company_id = ?

         
    )
    ORDER BY decode(companyname,'唐钢','邯钢','宣钢','承钢','舞钢','石钢','衡板','邯宝')
### The error may exist in file [E:\new\hbis_erp\target\classes\cn\hbis\erp\modular\system\mapper\mapping\AccountabilityUnitManageMapper.xml]
### The error may involve cn.hbis.erp.modular.system.mapper.AccountabilityUnitManageMapper.xsegcexcel
### The error occurred while executing a query
### SQL: SELECT     company_id,     nvl(companyname,'-')companyname,     nvl("TO_CHAR"(FKDAT,'yyyy-mm'),'-') month,     nvl("TO_CHAR"(fkdat,'yyyy-mm-dd'),'-')fkdat,     nvl(fkimg,0)fkimg,     nvl(kzwi6,0) kzwi6,     nvl(kzwi6*fkimg,0) money,     nvl(FKART,'-') FKART,     nvl(order_type_describe,'-') order_type_describe,     nvl(product_grade,'-') product_grade,     nvl(sale_group,'-') sale_group,     nvl(sale_body,'-') sale_body,     nvl(ORDER_MOUNT,0) ORDER_MOUNT,     nvl(DESTINATION_NAME,'-')DESTINATION_NAME,     nvl(CONTRACT_NO,0)CONTRACT_NO,     nvl(DJ_DATE,'-')DJ_DATE,     nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,     nvl(name,'-') name,     nvl(VARIETY,'-')VARIETY,     nvl("TO_CHAR"(ACTUAL_DATE),'-')ACTUAL_DATE,     nvl(product_line,'-') product_line,     nvl(ATTRIBUTE1,'-') ATTRIBUTE1,     nvl(ATTRIBUTE2,'-') ATTRIBUTE2,     nvl(ATTRIBUTE9,'-') ATTRIBUTE9,     nvl(MATERIAL_INFO,'-') MATERIAL_INFO,     nvl(PAYER_NAME,'-') PAYER_NAME,     nvl(SALE_PRICE,0) SALE_PRICE,     nvl(VBELN,'-') VBELN,     nvl(VGBEL,'-') VGBEL,     nvl(VGPOS,'空') VGPOS,     nvl(ORDER_NO,'-') ORDER_NO,     nvl(ORDER_ROW,'-') ORDER_ROW,     nvl(DZ_NAME,'-') DZ_NAME,     nvl(PRODUCT_CODE,'-') PRODUCT_CODE,     nvl(ORDER_NOTE,'-') ORDER_NOTE     from     (SELECT     company_id,     nvl(companyname,'-')companyname,     fkdat,     fkimg,     nvl(FKART,'-') FKART,     nvl(order_type_describe,'-') order_type_describe,     nvl(product_grade,'-') product_grade,     nvl(sale_group,'-') sale_group,     nvl(sale_body,'-') sale_body,     nvl(ORDER_MOUNT,0) ORDER_MOUNT,     DESTINATION_NAME,     CONTRACT_NO,     DJ_DATE,     nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,     nvl(name,'-') name,     nvl(VARIETY,'-')VARIETY,     nvl(kzwi6,0) kzwi6,     ACTUAL_DATE,     nvl(product_line,'-') product_line,     nvl(ATTRIBUTE1,'-') ATTRIBUTE1,     nvl(ATTRIBUTE2,'-') ATTRIBUTE2,     nvl(ATTRIBUTE9,'-') ATTRIBUTE9,     nvl(MATERIAL_INFO,'-') MATERIAL_INFO,     nvl(PAYER_NAME,'-') PAYER_NAME,     nvl(SALE_PRICE,0) SALE_PRICE,     nvl(VBELN,'-') VBELN,     nvl(VGBEL,'-') VGBEL,     nvl(VGPOS,'-') VGPOS,     nvl(ORDER_NO,'-') ORDER_NO,     nvl(ORDER_ROW,'-') ORDER_ROW,     nvl(DZ_NAME,'-') DZ_NAME,      nvl(PRODUCT_CODE,'-') PRODUCT_CODE,     nvl(ORDER_NOTE,'-') ORDER_NOTE     from     (SELECT distinct     decode(settle.company_id,     9580,     '唐钢',     9727,     '邯钢',     9193,     '宣钢',     9196,     '承钢',     1932,     '舞钢',     8110,     '石钢',     8493,     '衡板',     7778,     '邯宝') AS companyname,     settle.company_id,     xsztdzb.sale_body,     rpcl.product_grade,     case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,     settle.fkdat,     settle.FKART,     settle.kzwi6,     settle.VBELN,     settle.VGBEL,     settle.VGPOS,     sso.DESTINATION_NAME,     sso.CONTRACT_NO,     sso.MATERIAL_INFO,     sso.order_mount,     sso.order_type_describe,     sso.saler_name,     sso.sale_group,     sso.DJ_DATE,     sso.ATTRIBUTE1,     sso.ATTRIBUTE2,     sso.ATTRIBUTE9,     sso.ORDER_NO,     sso.ORDER_ROW,     sso.ORDER_NOTE,     sso.PRODUCT_TYPE,     sso.PAYER_NAME,     sso.DZ_NAME,     sso.PRODUCT_CODE,     sso.sale_body ss,     sso.SALE_PRICE,     svtp.VARIETY,     (select max(DATA.Name)     from scm_delivery_detail detail     JOIN crm_resource_data DATA     ON DATA.full_name = detail.ext     AND DATA.company_id = detail.company_id     AND (DATA.TYPE = 6 )     where settle.company_id = detail.company_id     and settle.vgbel = detail.deliv_numb     and settle.vgpos = detail.deliv_item     and ( detail.delivery_delete  < > 'X' or     detail.delivery_delete is null)) name,     (select max(detail.ACTUAL_DATE)     from scm_delivery_detail detail     where settle.company_id = detail.company_id     and settle.vgbel = detail.deliv_numb     and settle.vgpos = detail.deliv_item     and ( detail.delivery_delete  < > 'X'  or     detail.delivery_delete is null))ACTUAL_DATE,     (select max(detail.ext)     from scm_delivery_detail detail     where settle.company_id = detail.company_id     and settle.vgbel = detail.deliv_numb     and settle.vgpos = detail.deliv_item     and ( detail.delivery_delete  < > 'X'  or     detail.delivery_delete is null))product_line     FROM scm_steel_settle settle      left join scm_sale_order sso      on settle.company_id = sso.company_id     and settle.aubel = sso.order_no     and settle.aupos = sso.order_row     left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb      ON sso.company_id = xsztdzb.company_id     AND sso.sale_body = xsztdzb.sale_body_des      inner join scm_variety_to_pt_gp svtp     on sso.company_id = svtp.company_id     and sso.product_code = svtp.product_group      left join (SELECT a.company_id,     a.product_class,     a.product_line_class,     a.product_class_crude,     a.product_class_fine,     a.product_grade     FROM REPORT_PRODUCT_CLASS_LEVEL a     where a.status = '0'     union all     SELECT b.company_id,     b.second_code,     b.product_line_class,     b.product_class_crude,     b.product_class_fine,     b.product_grade     FROM REPORT_PRODUCT_CLASS_LEVEL b     where b.status = '0') rpcl     on sso.company_id = rpcl.company_id     and sso.product_type = rpcl.product_class     where     settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')     and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')     and  settle.company_id in ('9580','9727','9193')     order by settle.id desc) t     where t.order_type_describe not in     (select distinct cfd.data_name     from crm_filter_data cfd               where cfd.data_type in ('5','10')                    and cfd.status = '0'     and cfd.company_id = t.company_id)     and t.saler_name not in     (select cfd.data_name     from crm_filter_data cfd     where cfd.data_type = '1'     and cfd.status = '0'     and cfd.company_id = t.company_id     and instr(concat(t.product_line, t.company_id),     concat(cfd.product_line, cfd.company_id))  > 0)     AND t.sale_group NOT IN (SELECT cfd.data_name     FROM crm_filter_data cfd     WHERE cfd.company_id = t.company_id     AND cfd.data_type = 9     AND cfd.status = 0)                        and t.company_id = ?                UNION     SELECT     company_id ,     nvl(companyname,'-')companyname,     fkdat,     fkimg,     nvl(FKART,'-') FKART,     nvl(order_type_describe,'-') order_type_describe,     nvl(product_grade,'-') product_grade,     nvl(sale_group,'-') sale_group,     nvl(sale_body,'-') sale_body,     nvl(ORDER_MOUNT,0) ORDER_MOUNT,     DESTINATION_NAME,     CONTRACT_NO,     DJ_DATE,     nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,     nvl(name,'-') name,     nvl(VARIETY,'-')VARIETY,     nvl(kzwi6,0) kzwi6,     ACTUAL_DATE,      nvl(product_line,'-') product_line,     nvl(ATTRIBUTE1,'-') ATTRIBUTE1,     nvl(ATTRIBUTE2,'-') ATTRIBUTE2,     nvl(ATTRIBUTE9,'-') ATTRIBUTE9,     nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,     nvl(PAYER_NAME,'-') PAYER_NAME,     nvl(SALE_PRICE,0) SALE_PRICE,     nvl(VBELN,'-')  VBELN,     nvl(VGBEL,'-') VGBEL,     nvl(VGPOS,'-')  VGPOS,     nvl(ORDER_NO,'-')  ORDER_NO,     nvl(ORDER_ROW,'-') ORDER_ROW,     nvl(DZ_NAME,'-') DZ_NAME,     nvl(PRODUCT_CODE,'-') PRODUCT_CODE,     nvl(ORDER_NOTE,'-') ORDER_NOTE     from (     SELECT distinct     decode(settle.company_id,     9580,     '唐钢',     9727,     '邯钢',     9193,     '宣钢',     9196,     '承钢',     1932,     '舞钢',     8110,     '石钢',     8493,     '衡板',     7778,     '邯宝') AS companyname,     settle.company_id,     xsztdzb.sale_body,     rpcl.product_grade,     case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,     settle.fkdat,     settle.FKART,     settle.kzwi6,     sso.DJ_DATE,     settle.VBELN,     sso.DESTINATION_NAME,     sso.CONTRACT_NO,     settle.VGBEL,     settle.VGPOS,     sso.MATERIAL_INFO,     sso.order_mount,     sso.order_type_describe,     sso.saler_name,     sso.sale_group,     sso.ATTRIBUTE1,     sso.ATTRIBUTE2,     sso.ATTRIBUTE9,     sso.ORDER_NO,     sso.ORDER_ROW,     sso.ORDER_NOTE,     sso.PRODUCT_TYPE,     sso.PAYER_NAME,     sso.DZ_NAME,     sso.PRODUCT_CODE,     sso.sale_body ss,     sso.SALE_PRICE,     svtp.VARIETY,    (select max(DATA.Name)         from scm_delivery_detail detail         JOIN crm_resource_data DATA         ON DATA.full_name = detail.ext         AND DATA.company_id = detail.company_id         AND (DATA.TYPE = 6 )          where  detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  <> 'X' or         detail.delivery_delete is null)) name,     (select max(detail.ACTUAL_DATE)     from scm_delivery_detail detail     where settle.company_id = detail.company_id     and settle.vgbel = detail.deliv_numb     and settle.vgpos = detail.deliv_item     and ( detail.delivery_delete  < > 'X'  or     detail.delivery_delete is null))ACTUAL_DATE,     (select max(detail.ext)         from scm_delivery_detail detail         where detail.ORDER_NO = settle.aubel         and detail.ORDER_ITEM = settle.aupos         and detail.company_id =settle.company_id         and ( detail.delivery_delete  < > 'X'  or         detail.delivery_delete is null))product_line     FROM scm_steel_settle settle     left join scm_sale_order sso     on settle.company_id = sso.company_id     and settle.aubel = sso.order_no     and settle.aupos = sso.order_row     left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb     ON sso.company_id = xsztdzb.company_id     AND sso.sale_body = xsztdzb.sale_body_des     inner join scm_variety_to_pt_gp svtp     on sso.company_id = svtp.company_id     and sso.product_code = svtp.product_group      left join (SELECT a.company_id,     a.product_class,     a.product_line_class,     a.product_class_crude,     a.product_class_fine,     a.product_grade     FROM REPORT_PRODUCT_CLASS_LEVEL a     where a.status = '0'     union all     SELECT b.company_id,     b.second_code,     b.product_line_class,     b.product_class_crude,     b.product_class_fine,     b.product_grade     FROM REPORT_PRODUCT_CLASS_LEVEL b     where b.status = '0') rpcl     on sso.company_id = rpcl.company_id     and sso.product_type = rpcl.product_class     where     settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')     and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')      and  settle.company_id in ('9196')     order by settle.id desc) t     where t.order_type_describe not in     (select distinct cfd.data_name     from crm_filter_data cfd               where cfd.data_type in ('5','10')                    and cfd.status = '0'     and cfd.company_id = t.company_id)     and t.saler_name not in     (select cfd.data_name     from crm_filter_data cfd     where cfd.data_type = '1'     and cfd.status = '0'     and cfd.company_id = t.company_id     and instr(concat(t.product_line, t.company_id),     concat(cfd.product_line, cfd.company_id))  > 0)     AND t.sale_group NOT IN (SELECT cfd.data_name     FROM crm_filter_data cfd     WHERE cfd.company_id = t.company_id     AND cfd.data_type = 9     AND cfd.status = 0)                        and t.company_id = ?                UNION     SELECT     company_id,     nvl(companyname,'-')companyname,     fkdat,     fkimg,     nvl(FKART,'-') FKART,     nvl(order_type_describe,'-') order_type_describe,     nvl(product_grade,'-') product_grade,     nvl(sale_group,'-') sale_group,     nvl(sale_body,'-') sale_body,     nvl(ORDER_MOUNT,0) ORDER_MOUNT,     DESTINATION_NAME,     CONTRACT_NO,     DJ_DATE,     nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,     nvl(name,'-')  name,     nvl(VARIETY,'-')VARIETY,     nvl(kzwi6,0) kzwi6,     ACTUAL_DATE,     nvl(product_line,'-') product_line,     nvl(ATTRIBUTE1,'-') ATTRIBUTE1,     nvl(ATTRIBUTE2,'-') ATTRIBUTE2,     nvl(ATTRIBUTE9,'-') ATTRIBUTE9,     nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,     nvl(PAYER_NAME,'-')  PAYER_NAME,     nvl(SALE_PRICE,0) SALE_PRICE,     nvl(VBELN,'-') VBELN,     nvl(VGBEL,'-')  VGBEL,     nvl(VGPOS,'-')  VGPOS,     nvl(ORDER_NO,'-')  ORDER_NO,     nvl(ORDER_ROW,'-') ORDER_ROW,     nvl(DZ_NAME,'-') DZ_NAME,     nvl(PRODUCT_CODE,'-') PRODUCT_CODE,     nvl(ORDER_NOTE,'-') ORDER_NOTE     from (     SELECT distinct     decode(settle.company_id,     9580,     '唐钢',     9727,     '邯钢',     9193,     '宣钢',     9196,     '承钢',     1932,     '舞钢',     8110,     '石钢',     8493,     '衡板',     7778,     '邯宝') AS companyname,     settle.company_id,     case when  settle.company_id='8110' then  sso.sale_body  else '' end  sggl,     xsztdzb.sale_body，     rpcl.product_grade,     case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,     settle.fkdat,     settle.FKART,     settle.kzwi6,     settle.VBELN,     settle.VGBEL,     settle.VGPOS,     sso.MATERIAL_INFO,     sso.order_mount,     sso.DESTINATION_NAME,     sso.CONTRACT_NO,     sso.order_type_describe,     sso.saler_name,     sso.sale_group,      sso.DJ_DATE,     sso.ATTRIBUTE1,     sso.ATTRIBUTE2,     sso.ATTRIBUTE9,     sso.ORDER_NO,     sso.ORDER_ROW,     sso.ORDER_NOTE,     sso.PRODUCT_TYPE,     sso.PAYER_NAME,     sso.DZ_NAME,     sso.PRODUCT_CODE,     sso.SALE_PRICE,     svtp.VARIETY,     decode(settle.company_id,     1932,     '宽厚板',     8110,     '特钢',     8493,     '薄板') AS name,     (select max(detail.ACTUAL_DATE)     from scm_delivery_detail detail     where settle.company_id = detail.company_id     and settle.vgbel = detail.deliv_numb     and settle.vgpos = detail.deliv_item     and ( detail.delivery_delete  < > 'X'  or     detail.delivery_delete is null))ACTUAL_DATE,     (select max(detail.ext)     from scm_delivery_detail detail     where settle.company_id = detail.company_id     and settle.vgbel = detail.deliv_numb     and settle.vgpos = detail.deliv_item     and ( detail.delivery_delete  < > 'X'  or     detail.delivery_delete is null))product_line     FROM scm_steel_settle settle     left join scm_sale_order sso     on settle.company_id = sso.company_id     and settle.aubel = sso.order_no     and settle.aupos = sso.order_row     left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb     ON sso.company_id = xsztdzb.company_id     AND sso.sale_body = xsztdzb.sale_body_des     inner join scm_variety_to_pt_gp svtp     on sso.company_id = svtp.company_id     and sso.product_code = svtp.product_group      left join (SELECT a.company_id,     a.product_class,     a.product_line_class,     a.product_class_crude,     a.product_class_fine,     a.product_grade     FROM REPORT_PRODUCT_CLASS_LEVEL a     where a.status = '0'     union all     SELECT b.company_id,     b.second_code,     b.product_line_class,     b.product_class_crude,     b.product_class_fine,     b.product_grade     FROM REPORT_PRODUCT_CLASS_LEVEL b     where b.status = '0') rpcl     on sso.company_id = rpcl.company_id     and sso.product_type = rpcl.product_class     where     settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')     and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')     and  settle.company_id in ('8110','8493','1932')      order by settle.id desc) t     where t.order_type_describe not in     (select distinct cfd.data_name     from crm_filter_data cfd               where cfd.data_type in ('5','10')                  and cfd.status = '0'     and cfd.company_id = t.company_id)     and t.saler_name not in     (select cfd.data_name     from crm_filter_data cfd     where cfd.data_type = '1'     and cfd.status = '0'     and cfd.company_id = t.company_id     and instr(concat(t.product_line, t.company_id),     concat(cfd.product_line, cfd.company_id))  > 0)     AND t.sale_group NOT IN (SELECT cfd.data_name     FROM crm_filter_data cfd     WHERE cfd.company_id = t.company_id     AND cfd.data_type = 9     AND cfd.status = 0)     and (         t.sggl = '分公司'         or t.sale_group = '销售部'         or  t.sale_group = '营销中心'         or  t.sale_group ='1000'         or  t.sale_group = '科技部')         )                        and t.company_id = ?                )     ORDER BY decode(companyname,'唐钢','邯钢','宣钢','承钢','舞钢','石钢','衡板','邯宝')
### Cause: java.sql.SQLException: sql injection violation, syntax error: TODO : pos 15900, line 570, column 11, token AND : SELECT
    company_id,
    nvl(companyname,'-')companyname,
    nvl("TO_CHAR"(FKDAT,'yyyy-mm'),'-') month,
    nvl("TO_CHAR"(fkdat,'yyyy-mm-dd'),'-')fkdat,
    nvl(fkimg,0)fkimg,
    nvl(kzwi6,0) kzwi6,
    nvl(kzwi6*fkimg,0) money,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    nvl(DESTINATION_NAME,'-')DESTINATION_NAME,
    nvl(CONTRACT_NO,0)CONTRACT_NO,
    nvl(DJ_DATE,'-')DJ_DATE,
    nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl("TO_CHAR"(ACTUAL_DATE),'-')ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-') MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'空') VGPOS,
    nvl(ORDER_NO,'-') ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from
    (SELECT
    company_id,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-') MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'-') VGPOS,
    nvl(ORDER_NO,'-') ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,

    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from
    (SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    xsztdzb.sale_body,
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    settle.VBELN,
    settle.VGBEL,
    settle.VGPOS,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,
    sso.DJ_DATE,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.sale_body ss,
    sso.SALE_PRICE,
    svtp.VARIETY,
    (select max(DATA.Name)
    from scm_delivery_detail detail
    JOIN crm_resource_data DATA
    ON DATA.full_name = detail.ext
    AND DATA.company_id = detail.company_id
    AND (DATA.TYPE = 6 )
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X' or
    detail.delivery_delete is null)) name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle

    left join scm_sale_order sso

    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb

    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des

    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and  settle.company_id in ('9580','9727','9193')
    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')


     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
         

            and t.company_id = ?

         
    UNION
    SELECT
    company_id ,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,

    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-')  VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'-')  VGPOS,
    nvl(ORDER_NO,'-')  ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from (
    SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    xsztdzb.sale_body,
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    sso.DJ_DATE,
    settle.VBELN,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    settle.VGBEL,
    settle.VGPOS,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.sale_body ss,
    sso.SALE_PRICE,
    svtp.VARIETY,
   (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )

        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
        from scm_delivery_detail detail
        where detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  < > 'X'  or
        detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle
    left join scm_sale_order sso
    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des
    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')

    and  settle.company_id in ('9196')
    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')


     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
         

            and t.company_id = ?

         
    UNION
    SELECT
    company_id,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,
    nvl(name,'-')  name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,
    nvl(PAYER_NAME,'-')  PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-')  VGBEL,
    nvl(VGPOS,'-')  VGPOS,
    nvl(ORDER_NO,'-')  ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from (
    SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    case when  settle.company_id='8110' then  sso.sale_body  else '' end  sggl,
    xsztdzb.sale_body，
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    settle.VBELN,
    settle.VGBEL,
    settle.VGPOS,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,

    sso.DJ_DATE,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.SALE_PRICE,
    svtp.VARIETY,
    decode(settle.company_id,
    1932,
    '宽厚板',
    8110,
    '特钢',
    8493,
    '薄板') AS name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle
    left join scm_sale_order sso
    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des
    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and  settle.company_id in ('8110','8493','1932')

    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')
     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
    and (
        t.sggl = '分公司'
        or t.sale_group = '销售部'
        or  t.sale_group = '营销中心'
        or  t.sale_group ='1000'
        or  t.sale_group = '科技部')
        )
         

            and t.company_id = ?

         
    )
    ORDER BY decode(companyname,'唐钢','邯钢','宣钢','承钢','舞钢','石钢','衡板','邯宝')
; uncategorized SQLException; SQL state [null]; error code [0]; sql injection violation, syntax error: TODO : pos 15900, line 570, column 11, token AND : SELECT
    company_id,
    nvl(companyname,'-')companyname,
    nvl("TO_CHAR"(FKDAT,'yyyy-mm'),'-') month,
    nvl("TO_CHAR"(fkdat,'yyyy-mm-dd'),'-')fkdat,
    nvl(fkimg,0)fkimg,
    nvl(kzwi6,0) kzwi6,
    nvl(kzwi6*fkimg,0) money,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    nvl(DESTINATION_NAME,'-')DESTINATION_NAME,
    nvl(CONTRACT_NO,0)CONTRACT_NO,
    nvl(DJ_DATE,'-')DJ_DATE,
    nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl("TO_CHAR"(ACTUAL_DATE),'-')ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-') MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'空') VGPOS,
    nvl(ORDER_NO,'-') ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from
    (SELECT
    company_id,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-') MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'-') VGPOS,
    nvl(ORDER_NO,'-') ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,

    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from
    (SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    xsztdzb.sale_body,
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    settle.VBELN,
    settle.VGBEL,
    settle.VGPOS,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,
    sso.DJ_DATE,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.sale_body ss,
    sso.SALE_PRICE,
    svtp.VARIETY,
    (select max(DATA.Name)
    from scm_delivery_detail detail
    JOIN crm_resource_data DATA
    ON DATA.full_name = detail.ext
    AND DATA.company_id = detail.company_id
    AND (DATA.TYPE = 6 )
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X' or
    detail.delivery_delete is null)) name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle

    left join scm_sale_order sso

    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb

    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des

    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and  settle.company_id in ('9580','9727','9193')
    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')


     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
         

            and t.company_id = ?

         
    UNION
    SELECT
    company_id ,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,

    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-')  VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'-')  VGPOS,
    nvl(ORDER_NO,'-')  ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from (
    SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    xsztdzb.sale_body,
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    sso.DJ_DATE,
    settle.VBELN,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    settle.VGBEL,
    settle.VGPOS,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.sale_body ss,
    sso.SALE_PRICE,
    svtp.VARIETY,
   (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )

        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
        from scm_delivery_detail detail
        where detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  < > 'X'  or
        detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle
    left join scm_sale_order sso
    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des
    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')

    and  settle.company_id in ('9196')
    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')


     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
         

            and t.company_id = ?

         
    UNION
    SELECT
    company_id,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,
    nvl(name,'-')  name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,
    nvl(PAYER_NAME,'-')  PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-')  VGBEL,
    nvl(VGPOS,'-')  VGPOS,
    nvl(ORDER_NO,'-')  ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from (
    SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    case when  settle.company_id='8110' then  sso.sale_body  else '' end  sggl,
    xsztdzb.sale_body，
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    settle.VBELN,
    settle.VGBEL,
    settle.VGPOS,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,

    sso.DJ_DATE,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.SALE_PRICE,
    svtp.VARIETY,
    decode(settle.company_id,
    1932,
    '宽厚板',
    8110,
    '特钢',
    8493,
    '薄板') AS name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle
    left join scm_sale_order sso
    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des
    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and  settle.company_id in ('8110','8493','1932')

    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')
     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
    and (
        t.sggl = '分公司'
        or t.sale_group = '销售部'
        or  t.sale_group = '营销中心'
        or  t.sale_group ='1000'
        or  t.sale_group = '科技部')
        )
         

            and t.company_id = ?

         
    )
    ORDER BY decode(companyname,'唐钢','邯钢','宣钢','承钢','舞钢','石钢','衡板','邯宝'); nested exception is java.sql.SQLException: sql injection violation, syntax error: TODO : pos 15900, line 570, column 11, token AND : SELECT
    company_id,
    nvl(companyname,'-')companyname,
    nvl("TO_CHAR"(FKDAT,'yyyy-mm'),'-') month,
    nvl("TO_CHAR"(fkdat,'yyyy-mm-dd'),'-')fkdat,
    nvl(fkimg,0)fkimg,
    nvl(kzwi6,0) kzwi6,
    nvl(kzwi6*fkimg,0) money,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    nvl(DESTINATION_NAME,'-')DESTINATION_NAME,
    nvl(CONTRACT_NO,0)CONTRACT_NO,
    nvl(DJ_DATE,'-')DJ_DATE,
    nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl("TO_CHAR"(ACTUAL_DATE),'-')ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-') MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'空') VGPOS,
    nvl(ORDER_NO,'-') ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from
    (SELECT
    company_id,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-') MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'-') VGPOS,
    nvl(ORDER_NO,'-') ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,

    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from
    (SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    xsztdzb.sale_body,
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    settle.VBELN,
    settle.VGBEL,
    settle.VGPOS,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,
    sso.DJ_DATE,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.sale_body ss,
    sso.SALE_PRICE,
    svtp.VARIETY,
    (select max(DATA.Name)
    from scm_delivery_detail detail
    JOIN crm_resource_data DATA
    ON DATA.full_name = detail.ext
    AND DATA.company_id = detail.company_id
    AND (DATA.TYPE = 6 )
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X' or
    detail.delivery_delete is null)) name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle

    left join scm_sale_order sso

    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb

    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des

    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and  settle.company_id in ('9580','9727','9193')
    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')


     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
         

            and t.company_id = ?

         
    UNION
    SELECT
    company_id ,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,

    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-')  VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'-')  VGPOS,
    nvl(ORDER_NO,'-')  ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from (
    SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    xsztdzb.sale_body,
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    sso.DJ_DATE,
    settle.VBELN,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    settle.VGBEL,
    settle.VGPOS,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.sale_body ss,
    sso.SALE_PRICE,
    svtp.VARIETY,
   (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )

        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
        from scm_delivery_detail detail
        where detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  < > 'X'  or
        detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle
    left join scm_sale_order sso
    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des
    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')

    and  settle.company_id in ('9196')
    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')


     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
         

            and t.company_id = ?

         
    UNION
    SELECT
    company_id,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,
    nvl(name,'-')  name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,
    nvl(PAYER_NAME,'-')  PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-')  VGBEL,
    nvl(VGPOS,'-')  VGPOS,
    nvl(ORDER_NO,'-')  ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from (
    SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    case when  settle.company_id='8110' then  sso.sale_body  else '' end  sggl,
    xsztdzb.sale_body，
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    settle.VBELN,
    settle.VGBEL,
    settle.VGPOS,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,

    sso.DJ_DATE,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.SALE_PRICE,
    svtp.VARIETY,
    decode(settle.company_id,
    1932,
    '宽厚板',
    8110,
    '特钢',
    8493,
    '薄板') AS name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle
    left join scm_sale_order sso
    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des
    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and  settle.company_id in ('8110','8493','1932')

    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')
     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
    and (
        t.sggl = '分公司'
        or t.sale_group = '销售部'
        or  t.sale_group = '营销中心'
        or  t.sale_group ='1000'
        or  t.sale_group = '科技部')
        )
         

            and t.company_id = ?

         
    )
    ORDER BY decode(companyname,'唐钢','邯钢','宣钢','承钢','舞钢','石钢','衡板','邯宝')
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:89)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
	at com.sun.proxy.$Proxy105.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.executeForMany(PageMapperMethod.java:173)
	at com.baomidou.mybatisplus.core.override.PageMapperMethod.execute(PageMapperMethod.java:86)
	at com.baomidou.mybatisplus.core.override.PageMapperProxy.invoke(PageMapperProxy.java:64)
	at com.sun.proxy.$Proxy119.xsegcexcel(Unknown Source)
	at cn.hbis.erp.modular.system.service.AccountabilityUnitManageService.xsegc(AccountabilityUnitManageService.java:137)
	at cn.hbis.erp.modular.system.service.AccountabilityUnitManageService$$FastClassBySpringCGLIB$$49e914cd.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.service.AccountabilityUnitManageService$$EnhancerBySpringCGLIB$$17a0a5d2.xsegc(<generated>)
	at cn.hbis.erp.modular.system.controller.ExportController.exportXSJSGc(ExportController.java:416)
	at cn.hbis.erp.modular.system.controller.ExportController$$FastClassBySpringCGLIB$$815f3b9.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at cn.hbis.erp.core.interceptor.SessionHolderInterceptor.sessionKit(SessionHolderInterceptor.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at cn.hbis.erp.modular.system.controller.ExportController$$EnhancerBySpringCGLIB$$ccf36da.exportXSJSGc(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
	at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at cn.stylefeng.roses.core.xss.XssFilter.doFilter(XssFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:123)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:791)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.sql.SQLException: sql injection violation, syntax error: TODO : pos 15900, line 570, column 11, token AND : SELECT
    company_id,
    nvl(companyname,'-')companyname,
    nvl("TO_CHAR"(FKDAT,'yyyy-mm'),'-') month,
    nvl("TO_CHAR"(fkdat,'yyyy-mm-dd'),'-')fkdat,
    nvl(fkimg,0)fkimg,
    nvl(kzwi6,0) kzwi6,
    nvl(kzwi6*fkimg,0) money,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    nvl(DESTINATION_NAME,'-')DESTINATION_NAME,
    nvl(CONTRACT_NO,0)CONTRACT_NO,
    nvl(DJ_DATE,'-')DJ_DATE,
    nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl("TO_CHAR"(ACTUAL_DATE),'-')ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-') MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'空') VGPOS,
    nvl(ORDER_NO,'-') ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from
    (SELECT
    company_id,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-') PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-') MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'-') VGPOS,
    nvl(ORDER_NO,'-') ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,

    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from
    (SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    xsztdzb.sale_body,
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    settle.VBELN,
    settle.VGBEL,
    settle.VGPOS,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,
    sso.DJ_DATE,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.sale_body ss,
    sso.SALE_PRICE,
    svtp.VARIETY,
    (select max(DATA.Name)
    from scm_delivery_detail detail
    JOIN crm_resource_data DATA
    ON DATA.full_name = detail.ext
    AND DATA.company_id = detail.company_id
    AND (DATA.TYPE = 6 )
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X' or
    detail.delivery_delete is null)) name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle

    left join scm_sale_order sso

    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb

    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des

    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and  settle.company_id in ('9580','9727','9193')
    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')


     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
         

            and t.company_id = ?

         
    UNION
    SELECT
    company_id ,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,
    nvl(name,'-') name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,

    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,
    nvl(PAYER_NAME,'-') PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-')  VBELN,
    nvl(VGBEL,'-') VGBEL,
    nvl(VGPOS,'-')  VGPOS,
    nvl(ORDER_NO,'-')  ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from (
    SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    xsztdzb.sale_body,
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    sso.DJ_DATE,
    settle.VBELN,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    settle.VGBEL,
    settle.VGPOS,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.sale_body ss,
    sso.SALE_PRICE,
    svtp.VARIETY,
   (select max(DATA.Name)
        from scm_delivery_detail detail
        JOIN crm_resource_data DATA
        ON DATA.full_name = detail.ext
        AND DATA.company_id = detail.company_id
        AND (DATA.TYPE = 6 )

        where  detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  <> 'X' or
        detail.delivery_delete is null)) name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
        from scm_delivery_detail detail
        where detail.ORDER_NO = settle.aubel
        and detail.ORDER_ITEM = settle.aupos
        and detail.company_id =settle.company_id
        and ( detail.delivery_delete  < > 'X'  or
        detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle
    left join scm_sale_order sso
    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des
    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')

    and  settle.company_id in ('9196')
    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')


     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
         

            and t.company_id = ?

         
    UNION
    SELECT
    company_id,
    nvl(companyname,'-')companyname,
    fkdat,
    fkimg,
    nvl(FKART,'-') FKART,
    nvl(order_type_describe,'-') order_type_describe,
    nvl(product_grade,'-') product_grade,
    nvl(sale_group,'-') sale_group,
    nvl(sale_body,'-') sale_body,
    nvl(ORDER_MOUNT,0) ORDER_MOUNT,
    DESTINATION_NAME,
    CONTRACT_NO,
    DJ_DATE,
    nvl(PRODUCT_TYPE,'-')  PRODUCT_TYPE,
    nvl(name,'-')  name,
    nvl(VARIETY,'-')VARIETY,
    nvl(kzwi6,0) kzwi6,
    ACTUAL_DATE,
    nvl(product_line,'-') product_line,
    nvl(ATTRIBUTE1,'-') ATTRIBUTE1,
    nvl(ATTRIBUTE2,'-') ATTRIBUTE2,
    nvl(ATTRIBUTE9,'-') ATTRIBUTE9,
    nvl(MATERIAL_INFO,'-')  MATERIAL_INFO,
    nvl(PAYER_NAME,'-')  PAYER_NAME,
    nvl(SALE_PRICE,0) SALE_PRICE,
    nvl(VBELN,'-') VBELN,
    nvl(VGBEL,'-')  VGBEL,
    nvl(VGPOS,'-')  VGPOS,
    nvl(ORDER_NO,'-')  ORDER_NO,
    nvl(ORDER_ROW,'-') ORDER_ROW,
    nvl(DZ_NAME,'-') DZ_NAME,
    nvl(PRODUCT_CODE,'-') PRODUCT_CODE,
    nvl(ORDER_NOTE,'-') ORDER_NOTE
    from (
    SELECT distinct
    decode(settle.company_id,
    9580,
    '唐钢',
    9727,
    '邯钢',
    9193,
    '宣钢',
    9196,
    '承钢',
    1932,
    '舞钢',
    8110,
    '石钢',
    8493,
    '衡板',
    7778,
    '邯宝') AS companyname,
    settle.company_id,
    case when  settle.company_id='8110' then  sso.sale_body  else '' end  sggl,
    xsztdzb.sale_body，
    rpcl.product_grade,
    case when settle.fkimg='0.00' then null else settle.fkimg end fkimg  ,
    settle.fkdat,
    settle.FKART,
    settle.kzwi6,
    settle.VBELN,
    settle.VGBEL,
    settle.VGPOS,
    sso.MATERIAL_INFO,
    sso.order_mount,
    sso.DESTINATION_NAME,
    sso.CONTRACT_NO,
    sso.order_type_describe,
    sso.saler_name,
    sso.sale_group,

    sso.DJ_DATE,
    sso.ATTRIBUTE1,
    sso.ATTRIBUTE2,
    sso.ATTRIBUTE9,
    sso.ORDER_NO,
    sso.ORDER_ROW,
    sso.ORDER_NOTE,
    sso.PRODUCT_TYPE,
    sso.PAYER_NAME,
    sso.DZ_NAME,
    sso.PRODUCT_CODE,
    sso.SALE_PRICE,
    svtp.VARIETY,
    decode(settle.company_id,
    1932,
    '宽厚板',
    8110,
    '特钢',
    8493,
    '薄板') AS name,
    (select max(detail.ACTUAL_DATE)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))ACTUAL_DATE,
    (select max(detail.ext)
    from scm_delivery_detail detail
    where settle.company_id = detail.company_id
    and settle.vgbel = detail.deliv_numb
    and settle.vgpos = detail.deliv_item
    and ( detail.delivery_delete  < > 'X'  or
    detail.delivery_delete is null))product_line
    FROM scm_steel_settle settle
    left join scm_sale_order sso
    on settle.company_id = sso.company_id
    and settle.aubel = sso.order_no
    and settle.aupos = sso.order_row
    left join (select a.* from price_salebody_relation a where a.is_delete = 0 ) xsztdzb
    ON sso.company_id = xsztdzb.company_id
    AND sso.sale_body = xsztdzb.sale_body_des
    inner join scm_variety_to_pt_gp svtp
    on sso.company_id = svtp.company_id
    and sso.product_code = svtp.product_group

    left join (SELECT a.company_id,
    a.product_class,
    a.product_line_class,
    a.product_class_crude,
    a.product_class_fine,
    a.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL a
    where a.status = '0'
    union all
    SELECT b.company_id,
    b.second_code,
    b.product_line_class,
    b.product_class_crude,
    b.product_class_fine,
    b.product_grade
    FROM REPORT_PRODUCT_CLASS_LEVEL b
    where b.status = '0') rpcl
    on sso.company_id = rpcl.company_id
    and sso.product_type = rpcl.product_class
    where
    settle.fkdat >= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and settle.fkdat <= to_date(?, 'yyyy-mm-dd hh24:mi:ss')
    and  settle.company_id in ('8110','8493','1932')

    order by settle.id desc) t
    where t.order_type_describe not in
    (select distinct cfd.data_name
    from crm_filter_data cfd
     
        where cfd.data_type in ('5','10')
     

     
    and cfd.status = '0'
    and cfd.company_id = t.company_id)
    and t.saler_name not in
    (select cfd.data_name
    from crm_filter_data cfd
    where cfd.data_type = '1'
    and cfd.status = '0'
    and cfd.company_id = t.company_id
    and instr(concat(t.product_line, t.company_id),
    concat(cfd.product_line, cfd.company_id))  > 0)
    AND t.sale_group NOT IN (SELECT cfd.data_name
    FROM crm_filter_data cfd
    WHERE cfd.company_id = t.company_id
    AND cfd.data_type = 9
    AND cfd.status = 0)
    and (
        t.sggl = '分公司'
        or t.sale_group = '销售部'
        or  t.sale_group = '营销中心'
        or  t.sale_group ='1000'
        or  t.sale_group = '科技部')
        )
         

            and t.company_id = ?

         
    )
    ORDER BY decode(companyname,'唐钢','邯钢','宣钢','承钢','舞钢','石钢','衡板','邯宝')
	at com.alibaba.druid.wall.WallFilter.checkInternal(WallFilter.java:799)
	at com.alibaba.druid.wall.WallFilter.connection_prepareStatement(WallFilter.java:252)
	at com.alibaba.druid.filter.FilterChainImpl.connection_prepareStatement(FilterChainImpl.java:568)
	at com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.prepareStatement(ConnectionProxyImpl.java:342)
	at com.alibaba.druid.pool.DruidPooledConnection.prepareStatement(DruidPooledConnection.java:349)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.ConnectionLogger.invoke(ConnectionLogger.java:55)
	at com.sun.proxy.$Proxy168.prepareStatement(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.instantiateStatement(PreparedStatementHandler.java:87)
	at org.apache.ibatis.executor.statement.BaseStatementHandler.prepare(BaseStatementHandler.java:88)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.prepare(RoutingStatementHandler.java:59)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Invocation.proceed(Invocation.java:49)
	at com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor.intercept(PaginationInterceptor.java:158)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:61)
	at com.sun.proxy.$Proxy167.prepare(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:85)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:62)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:326)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:83)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:148)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
	... 112 common frames omitted
Caused by: com.alibaba.druid.sql.parser.ParserException: TODO : pos 15900, line 570, column 11, token AND
	at com.alibaba.druid.sql.dialect.oracle.parser.OracleStatementParser.parseStatementList(OracleStatementParser.java:706)
	at com.alibaba.druid.sql.parser.SQLStatementParser.parseStatementList(SQLStatementParser.java:83)
	at com.alibaba.druid.wall.WallProvider.checkInternal(WallProvider.java:624)
	at com.alibaba.druid.wall.WallProvider.check(WallProvider.java:578)
	at com.alibaba.druid.wall.WallFilter.checkInternal(WallFilter.java:786)
	... 146 common frames omitted

